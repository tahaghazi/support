(function(){(()=>{var A=[,()=>{window.up={version:"2.7.1"}},()=>{up.mockable=function(n){let o;const r=function(){return(o||n).apply(null,arguments)};return r.mock=()=>o=jasmine.createSpy("mockable",n),document.addEventListener("up:framework:reset",()=>o=null),r}},()=>{up.util=function(){function n(){}function o(){return Promise.resolve()}function r(i){let u,k;return function(...H){return k?u:(k=!0,u=i.apply(this,H))}}function e(i,u){return u=u.toString(),(u===""||u==="80")&&i==="http:"||u==="443"&&i==="https:"}const t={host:"cross-domain"};function s(i,u){u=Ce(u,t);const k=C(i);let H="";u.host==="cross-domain"&&(u.host=L(k)),u.host&&(H+=k.protocol+"//"+k.hostname,e(k.protocol,k.port)||(H+=`:${k.port}`));let{pathname:Z}=k;return u.trailingSlash===!1&&Z!=="/"&&(Z=Z.replace(/\/$/,"")),H+=Z,u.search!==!1&&(H+=k.search),u.hash!==!1&&(H+=k.hash),H}function a(i,u){return s(i)===s(u)}const l=location.protocol,w=location.hostname;function L(i){if(m(i)&&i.indexOf("//")===-1)return!1;const u=C(i);return w!==u.hostname||l!==u.protocol}function C(i){let u;return M(i)?u=up.element.get(i):i.pathname?u=i:(u=document.createElement("a"),u.href=i),u.hostname||(u.href=u.href),u.pathname[0]!=="/"&&(u=be(u,["protocol","hostname","port","pathname","search","hash"]),u.pathname="/"+u.pathname),u}function N(i){return i?i.toUpperCase():"GET"}function q(i){return i!=="GET"&&i!=="HEAD"}function I(i,...u){for(let k of u)for(let H in k)i[H]=k[H];return i}const _=Object.assign||I;function V(i){return Object.keys(i).map(u=>i[u])}const X=Object.values||V;function Q(i){return m(i)?u=>u[i]:i}function E(i,u){if(i.length===0)return[];u=Q(u);let k=[];for(let H=0;H<i.length;H++){let Z=i[H];k.push(u(Z,H))}return k}function P(i,u){const k=function(H,Z){return H[Z[0]]=Z[1],H};return E(i,u).reduce(k,{})}function y(i,u){for(let k=0;k<i.length;k++)u(i[k],k)}function f(i,u){let k;for(;(k=i.next())&&!k.done;)u(k.value)}function O(i){return i===null}function D(i){return i===void 0}const J=Fe(D);function T(i){return D(i)||O(i)}const K=Fe(T);function re(i){return T(i)?!0:te(i)&&i[re.key]?i[re.key]():m(i)||b(i)?i.length===0:ee(i)?Object.keys(i).length===0:!1}re.key="up.util.isBlank";function S(i,u=B){if(u(i))return i}const B=Fe(re);function d(i){return typeof i=="function"}function m(i){return typeof i=="string"||i instanceof String}function U(i){return typeof i=="boolean"||i instanceof Boolean}function W(i){return typeof i=="number"||i instanceof Number}function ee(i){return typeof i=="object"&&!O(i)&&(D(i.constructor)||i.constructor===Object)}function te(i){const u=typeof i;return u==="object"&&!O(i)||u==="function"}function oe(i){return i instanceof Element}function x(i){return i instanceof RegExp}function M(i){return up.browser.canJQuery()&&i instanceof jQuery}function F(i){var u;return!!(i&&(i.addEventListener||((u=i[0])==null?void 0:u.addEventListener)))}function ie(i){return te(i)&&d(i.then)}const{isArray:le}=Array;function v(i){return i instanceof FormData}function c(i){return le(i)?i:de(i)}function b(i){return le(i)||j(i)||ne(i)||M(i)||Y(i)}function j(i){return i instanceof NodeList}function Y(i){return i instanceof HTMLCollection}function ne(i){return Object.prototype.toString.call(i)==="[object Arguments]"}function ce(i){if(!O(i))return i}function pe(i){return b(i)?i:T(i)?[]:[i]}function he(i){return te(i)&&i[he.key]?i=i[he.key]():b(i)?i=de(i):ee(i)&&(i=_({},i)),i}function de(i){return Array.prototype.slice.call(i)}he.key="up.util.copy",Date.prototype[he.key]=function(){return new Date(+this)};function we(...i){return _({},...i)}function Ae(...i){const u={};for(let k of i)if(k)for(let H in k){const Z=k[H];J(Z)&&(u[H]=Z)}return u}function Ce(i,u){return u?we(u,i):i?he(i):{}}function Ne(i,u){let k=Ve(i);return J(i[0])&&(k=he(k),k[u]=i[0]),k}function qe(i,u){u=Q(u);let k;for(let H of i)if(u(H)){k=H;break}return k}function Oe(i,u){return!!xe(i,u)}function xe(i,u){u=Q(u);for(let k=0;k<i.length;k++){const H=u(i[k],k);if(H)return H}}function Se(i,u){u=Q(u);let k=!0;for(let H=0;H<i.length;H++)if(!u(i[H],H)){k=!1;break}return k}function Pe(i){return ge(i,K)}function _e(i){return se(i,K)}function Ee(i){return i.length<2?i:Me(De(i))}function He(i,u){if(i.length<2)return i;u=Q(u);const k=new Set;return ge(i,function(H,Z){const fe=u(H,Z);return k.has(fe)?!1:(k.add(fe),!0)})}function Me(i){const u=[];return i.forEach(k=>u.push(k)),u}function De(i){const u=new Set;return i.forEach(k=>u.add(k)),u}function ge(i,u){u=Q(u);const k=[];return y(i,function(H,Z){if(u(H,Z))return k.push(H)}),k}function Be(i,u){return u=Fe(Q(u)),ge(i,u)}function Ie(i,u){return ge(i,k=>ue(u,k))}function h(i,u){return setTimeout(u,i)}function g(i){return setTimeout(i)}function R(i){return Promise.resolve().then(i)}function G(i){let u=!1;return R(function(){if(!u)return i()}),()=>u=!0}function ae(i){return i[i.length-1]}function ue(i,u){return i.indexOf(u)>=0}function me(i,u){const k=be(i,Object.keys(u));return Le(u,k)}function be(i,u){const k={};for(let H of u)H in i&&(k[H]=i[H]);return k}function se(i,u){u=Q(u);const k={};for(let H in i){const Z=i[H];u(Z,H,i)&&(k[H]=i[H])}return k}function ve(i,u){return se(i,(k,H)=>!ue(u,H))}function ke(){return new Promise(n)}function ye(i,u){const k=i.indexOf(u);if(k>=0)return i.splice(k,1),u}function it(i,...u){return d(i)?i(...u):i}const ot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"};function at(i){return i.replace(/[&<>"']/g,u=>ot[u])}function ut(i){return i.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}function Ue(i,u){const k=i[u];return delete i[u],k}function lt(i,u,k){return i[k]=Ue(i,u)}function Ke(i,u){if(u(ae(i)))return i.pop()}function ct(i){return Ke(i,d)}function Ve(i){return Ke(i,ee)||{}}function We(i){return i}function ht(i){return i.length===1?i[0]:()=>E(i,u=>u())}function Ge(i){const u=[];for(let k of i)b(k)?u.push(...k):u.push(k);return u}function pt(i,u){return Ge(E(i,u))}function ft(i){return!!i}function dt(i,u){return i.then(u,u)}function Qe(i){return i==null?void 0:i.catch(n)}function mt(){let i,u;const k=new Promise(function(H,Z){i=H,u=Z});return k.resolve=i,k.reject=u,k.promise=()=>k,k}function gt(i){try{return Promise.resolve(i())}catch(u){return Promise.reject(u)}}function yt(i){return Object.prototype.hasOwnProperty(i)}function Le(i,u){if(i!=null&&i.valueOf&&(i=i.valueOf()),u!=null&&u.valueOf&&(u=u.valueOf()),typeof i!=typeof u)return!1;if(b(i)&&b(u))return Je(i,u);if(te(i)&&i[Le.key])return i[Le.key](u);if(ee(i)&&ee(u)){const k=Object.keys(i),H=Object.keys(u);return Je(k,H)?Se(k,Z=>Le(i[Z],u[Z])):!1}else return i===u}Le.key="up.util.isEqual";function Je(i,u){return i.length===u.length&&Se(i,(k,H)=>Le(k,u[H]))}function bt(i,u=" "){return m(i)?(i=i.split(u),i=E(i,k=>k.trim()),i=ge(i,B),i):pe(i)}function vt(i,u){return i.substring(i.length-u.length)===u}function wt(i){return i<.5?2*i*i:i*(4-i*2)-1}function St(i,...u){return u[0]instanceof i?u[0]:new i(...u)}let Et=0;function kt(){return Et++}function Lt(i){return he(i).reverse()}function Tt(i,u){const k={};for(let H in i)k[u(H)]=i[H];return k}function Ct(i){return i.replace(/[A-Z]/g,u=>"-"+u.toLowerCase())}function xt(i,u){return u+Ye(i)}function Rt(i,u){const k=new RegExp("^"+u+"(.+)$");let H=i.match(k);if(H)return Xe(H[1])}function Xe(i){return i[0].toLowerCase()+i.slice(1)}function Ye(i){return i[0].toUpperCase()+i.slice(1)}function At(i,u,k){Object.defineProperty(i,u,{get:k})}function Ft(i,u,k){pe(u).forEach(function(H){Object.defineProperty(i,H,{get(){const Z=k.call(this);let fe=Z[H];return d(fe)&&(fe=fe.bind(Z)),fe},set(Z){const fe=k.call(this);fe[H]=Z}})})}function je(i){let u,H="";if(m(i))u=i.replace(/[\n\r\t ]+/g," "),u=u.replace(/^[\n\r\t ]+/,""),u=u.replace(/[\n\r\t ]$/,"");else if(D(i))u="undefined";else if(W(i)||d(i))u=i.toString();else if(le(i))u=`[${E(i,je).join(", ")}]`,H="]";else if(M(i))u=`$(${E(i,je).join(", ")})`,H=")";else if(oe(i)){u=`<${i.tagName.toLowerCase()}`;for(let Z of["id","name","class"]){let fe=i.getAttribute(Z);fe&&(u+=` ${Z}="${fe}"`)}u+=">",H=">"}else if(x(i))u=i.toString();else try{u=JSON.stringify(i)}catch(Z){if(Z.name==="TypeError")u="(circular structure)";else throw Z}return u.length>200&&(u=`${u.substr(0,200)} \u2026`,u+=H),u}const Ot=/%[oOdisf]/g;function Pt(){return Math.floor(Date.now()*.001)}function _t(i,...u){return Ze(We,i,...u)}function Ze(i,u,...k){if(!u)return"";let H=0;return u.replace(Ot,function(){let Z=k[H];return Z=i(je(Z)),H+=1,Z})}function Mt(i){return Promise.all(E(i,Qe))}function Fe(i){return function(...u){return!i(...u)}}return{parseURL:C,normalizeURL:s,matchURLs:a,normalizeMethod:N,methodAllowsPayload:q,assign:_,assignPolyfill:I,copy:he,copyArrayLike:de,merge:we,mergeDefined:Ae,options:Ce,parseArgIntoOptions:Ne,each:y,eachIterator:f,map:E,flatMap:pt,mapObject:P,findResult:xe,some:Oe,every:Se,find:qe,filter:ge,reject:Be,intersect:Ie,compact:Pe,compactObject:_e,uniq:Ee,uniqBy:He,last:ae,isNull:O,isDefined:J,isUndefined:D,isGiven:K,isMissing:T,isPresent:B,isBlank:re,presence:S,isObject:te,isFunction:d,isString:m,isBoolean:U,isNumber:W,isElement:oe,isJQuery:M,isElementish:F,isPromise:ie,isOptions:ee,isArray:le,isFormData:v,isNodeList:j,isArguments:ne,isList:b,isRegExp:x,timer:h,contains:ue,objectContains:me,toArray:c,pick:be,pickBy:se,omit:ve,unresolvablePromise:ke,remove:ye,memoize:r,pluckKey:Ue,renameKey:lt,extractOptions:Ve,extractCallback:ct,noop:n,asyncNoop:o,identity:We,escapeHTML:at,escapeRegExp:ut,sequence:ht,evalOption:it,flatten:Ge,isTruthy:ft,newDeferred:mt,always:dt,muteRejection:Qe,asyncify:gt,isBasicObjectProperty:yt,isCrossOrigin:L,task:g,microtask:R,abortableMicrotask:G,isEqual:Le,splitValues:bt,endsWith:vt,wrapList:pe,wrapValue:St,simpleEase:wt,values:X,arrayToSet:De,setToArray:Me,uid:kt,upperCaseFirst:Ye,lowerCaseFirst:Xe,getter:At,delegate:Ft,reverse:Lt,prefixCamelCase:xt,unprefixCamelCase:Rt,camelToKebabCase:Ct,nullToUndefined:ce,sprintf:_t,sprintfWithFormattedArgs:Ze,renameKeys:Tt,timestamp:Pt,allSettled:Mt,negate:Fe}}()},()=>{up.error=function(){const n=up.util;function o(C,N={}){n.isArray(C)&&(C=n.sprintf(...C));const q=new Error(C);return n.assign(q,N),q}function r(C,N=o){const q=function(...I){const _=N(...I);return _.name=C,_};return q.is=I=>I.name===C,q.async=(...I)=>Promise.reject(q(...I)),q}const e=r("up.Failed"),t=r("AbortError",C=>o(C||"Aborted")),s=r("up.NotImplemented"),a=r("up.NotApplicable",(C,N)=>o(`Cannot apply change: ${C} (${N})`)),l=r("up.InvalidSelector",C=>o(`Cannot parse selector: ${C}`));function w(C){const{message:N}=C;up.emit(window,"error",{message:N,error:C,log:!1})}function L(...C){throw up.error.failed(C)}return{fail:L,failed:e,aborted:t,invalidSelector:l,notApplicable:a,notImplemented:s,emitGlobal:w}}(),up.fail=up.error.fail},()=>{up.migrate={config:{}}},()=>{up.browser=function(){const n=up.util;function o(I){I.submit()}function r(){return"ActiveXObject"in window}function e(){return n.contains(navigator.userAgent," Edge/")}function t(){return history.pushState&&up.protocol.initialRequestMethod()==="GET"}function s(){return!!window.Promise}const a=n.negate(r),l=n.negate(r);function w(){return!!window.jQuery}const L=n.memoize(function(){try{return new Function("return true")()}catch{return!1}});function C(I){var V;let _=(V=document.cookie.match(new RegExp(I+"=(\\w+)")))==null?void 0:V[1];if(_)return document.cookie=I+"=;Max-Age=0;Path=/",_}const N=function(){return w()||up.fail("jQuery must be published as window.jQuery"),jQuery};function q(I){if(!(!I.confirm||window.confirm(I.confirm)))throw up.error.aborted("User canceled action");return!0}return{submitForm:o,canPushState:t,canFormatLog:a,canPassiveEventListener:l,canJQuery:w,canPromise:s,canEval:L,assertConfirmed:q,popCookie:C,get jQuery(){return N()},isIE11:r,isEdge18:e}}()},(n,o,r)=>{r(8),up.element=function(){const e=up.util,t=up.browser.isIE11()?"msMatchesSelector":"matches";function s(...h){const g=h.pop();return(h[0]||document).querySelector(g)}function a(...h){const g=h.pop();return(h[0]||document).querySelectorAll(g)}function l(h,g){const R=[];return C(h,g)&&R.push(h),R.push(...a(h,g)),R}function w(h,g){const R=I(g);return h.contains(R)}function L(h,g){return h.closest?h.closest(g):C(h,g)?h:N(h,g)}function C(h,g){var R;return(R=h[t])==null?void 0:R.call(h,g)}function N(h,g){let R=h.parentElement;if(R)return C(R,g)?R:N(R,g)}function q(h,g){return _(L(h,g),l(h,g))}function I(...h){const g=h.pop();return e.isElement(g)?g:e.isString(g)?s(...h,g):e.isList(g)?(g.length>1&&up.fail("up.element.get(): Cannot cast multiple elements (%o) to a single element",g),g[0]):g}function _(...h){return e.flatMap(h,V)}function V(h){return e.isString(h)?a(h):e.wrapList(h)}function X(h){let g=h.parentNode;g&&g.removeChild(h)}function Q(h){h.setAttribute("hidden","")}function E(h){h.removeAttribute("hidden"),h.style.display==="none"&&(h.style.display="")}function P(h,g){g==null&&(g=!ge(h)),(g?E:Q)(h)}function y(h,g,R){const G=h.classList;return R==null&&(R=!G.contains(g)),R?G.add(g):G.remove(g)}function f(h,g,R,G){return G==null&&(G=!h.hasAttribute(g)),G?h.setAttribute(g,R):h.removeAttribute(g)}function O(h,g){for(let R in g){const G=g[R];e.isGiven(G)?h.setAttribute(R,G):h.removeAttribute(R)}}function D(h,g){const R={};for(let G of Object.keys(g))R[G]=h.getAttribute(G);return O(h,g),()=>O(h,R)}function J(h){var R;const g="meta"+te("name",h);return(R=s(g))==null?void 0:R.getAttribute("content")}function T(h,g){h.insertAdjacentElement("beforebegin",g)}function K(h,g){h.parentElement.replaceChild(g,h)}function re(h,g){const R=[],ae=h.replace(/\[([\w-]+)(?:[~|^$*]?=(["'])?([^\2\]]*?)\2)?\]/g,function(se,ve,ke,ye){return R.push(ye||""),`[${ve}]`}).split(/[ >]+/);let ue,me,be;for(let se of ae){let ve;if(se=se.replace(/^[\w-]+/,function(ke){return ve=ke,""}),me=document.createElement(ve||"div"),ue||(ue=me),se=se.replace(/#([\w-]+)/,function(ke,ye){return me.id=ye,""}),se=se.replace(/\.([\w-]+)/g,function(ke,ye){return me.classList.add(ye),""}),R.length&&(se=se.replace(/\[([\w-]+)\]/g,function(ke,ye){return me.setAttribute(ye,R.shift()),""})),se!=="")throw up.error.invalidSelector(h);be==null||be.appendChild(me),be=me}if(g){let se;if(se=e.pluckKey(g,"class"))for(let ve of e.wrapList(se))ue.classList.add(ve);(se=e.pluckKey(g,"style"))&&Ee(ue,se),(se=e.pluckKey(g,"text"))&&(ue.textContent=se),(se=e.pluckKey(g,"content"))&&(ue.innerHTML=se),O(ue,g)}return ue}function S(h,...g){let R,G;const ae=e.extractOptions(g);g.length===2?[R,G]=g:(R="beforeend",G=g[0]);const ue=re(G,ae);return h.insertAdjacentElement(R,ue),ue}function B(...h){return up.fragment.toTarget(...h)}const d=["HTML","BODY","HEAD","TITLE"],m=new RegExp("\\b("+d.join("|")+")\\b","i"),U=up.mockable(h=>C(h,d.join(",")));function W(h){return m.test(h)}function ee(h){return h.tagName.toLowerCase()}function te(h,g){return g=g.replace(/"/g,'\\"'),`[${h}="${g}"]`}function oe(h){return`[${h}]:not([${h}=false])`}function x(h){return h.match(/^[a-z0-9\-_]+$/i)?`#${h}`:te("id",h)}function M(h){return h=h.replace(/:/g,"\\:"),`.${h}`}function F(h){return new DOMParser().parseFromString(h,"text/html")}function ie(h){const g=document.createRange();g.setStart(document.body,0);let G=g.createContextualFragment(h.trim()).childNodes;if(G.length!==1)throw new Error("HTML must have a single root element");return G[0]}function le(){return document.documentElement}function v(h){h.offsetHeight}function c(h){const g=Oe(h,{transition:"none"});return v(h),g}function b(h){let g;e.isOptions(h)?g=h:g=xe(h);const R=g.transitionProperty,G=g.transitionDuration;return!(R==="none"||R==="all"&&G===0)}function j(h){const g=h.getBoundingClientRect();h.style.position="absolute";const R=h.offsetParent.getBoundingClientRect();Ee(h,{left:g.left-Se(h,"margin-left")-R.left,top:g.top-Se(h,"margin-top")-R.top,right:"",bottom:""})}function Y(h,g){for(let R in g)ne(h,R,g[R])}function ne(h,g,R){e.isMissing(h.getAttribute(g))&&h.setAttribute(g,R)}function ce(h){const g=h.parentNode,R=e.toArray(h.childNodes);e.each(R,G=>g.insertBefore(G,h)),g.removeChild(h)}function pe(h,g="up-wrapper"){let R;const G=re(g);for(;R=h.firstChild;)G.appendChild(R);return h.appendChild(G),G}function he(h,g){return e.nullToUndefined(h.getAttribute(g))}function de(h,g,R){const G=he(h,g);switch(G){case"false":return!1;case"true":case"":case g:return!0;default:if(R)return G}}function we(h,g){return de(h,g,!0)}function Ae(h,g){let R=h.getAttribute(g);if(R&&(R=R.replace(/_/g,""),R.match(/^[\d.]+$/)))return parseFloat(R)}function Ce(h,g){var G,ae;let R=(ae=(G=h.getAttribute)==null?void 0:G.call(h,g))==null?void 0:ae.trim();if(R)return JSON.parse(R)}function Ne(h,g,R=[]){let G=h.getAttribute(g);if(G){const ae=up.NonceableCallback.fromString(G).toFunction("event",...R);return function(ue){const me=e.values(e.pick(ue,R));return ae.call(h,ue,...me)}}}function qe(h,g){var R;return(R=L(h,"["+g+"]"))==null?void 0:R.getAttribute(g)}function Oe(h,g){const R=Pe(h,Object.keys(g));return Ee(h,g),()=>Ee(h,R)}function xe(h,g){const R=window.getComputedStyle(h);return _e(R,g)}function Se(h,g){const R=xe(h,g);if(e.isGiven(R))return parseFloat(R)}function Pe(h,g){const{style:R}=h;return _e(R,g)}function _e(h,g){return e.isString(g)?h[g]:e.pick(h,g)}function Ee(h,g){if(e.isString(g))h.setAttribute("style",g);else{const{style:R}=h;for(let G in g){let ae=g[G];ae=He(G,ae),R[G]=ae}}}function He(h,g){return e.isMissing(g)?g="":Me.has(h.toLowerCase().replace(/-/,""))&&(g=De(g)),g}const Me=e.arrayToSet(["top","right","bottom","left","padding","paddingtop","paddingright","paddingbottom","paddingleft","margin","margintop","marginright","marginbottom","marginleft","borderwidth","bordertopwidth","borderrightwidth","borderbottomwidth","borderleftwidth","width","height","maxwidth","maxheight","minwidth","minheight"]);function De(h){return e.isNumber(h)||e.isString(h)&&/^\d+$/.test(h)?h.toString()+"px":h}function ge(h){return!!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)}function Be(h){const g=/^up-/,R={};for(let G of h.attributes){const{name:ae}=G;ae.match(g)&&(R[ae]=G.value)}return R}function Ie(h){return h!==document&&!le().contains(h)}return{all:a,subtree:l,isInSubtree:w,closest:L,closestAttr:qe,matches:C,ancestor:N,around:q,get:I,list:_,remove:X,toggle:P,toggleClass:y,hide:Q,show:E,metaContent:J,replace:K,insertBefore:T,createFromSelector:re,setAttrs:O,setTemporaryAttrs:D,affix:S,toSelector:B,idSelector:x,classSelector:M,isSingleton:U,isSingletonSelector:W,attributeSelector:te,trueAttributeSelector:oe,tagName:ee,createDocumentFromHTML:F,createFromHTML:ie,get root(){return le()},paint:v,concludeCSSTransition:c,hasCSSTransition:b,fixedToAbsolute:j,setMissingAttrs:Y,setMissingAttr:ne,unwrap:ce,wrapChildren:pe,attr:he,booleanAttr:de,numberAttr:Ae,jsonAttr:Ce,callbackAttr:Ne,booleanOrStringAttr:we,setTemporaryStyle:Oe,style:xe,styleNumber:Se,inlineStyle:Pe,setStyle:Ee,isVisible:ge,upAttrs:Be,toggleAttr:f,isDetached:Ie}}()},(n,o,r)=>{r.r(o)},()=>{const n=up.util;up.Record=class{keys(){throw"Return an array of keys"}defaults(r){return{}}constructor(r){n.assign(this,this.defaults(r),this.attributes(r))}attributes(r=this){return n.pick(r,this.keys())}[n.copy.key](){return this.variant()}variant(r={}){return new this.constructor(n.merge(this.attributes(),r))}[n.isEqual.key](r){return this.constructor===r.constructor&&n.isEqual(this.attributes(),r.attributes())}}},()=>{const n=up.util;up.Config=class{constructor(r=()=>({})){this.blueprintFn=r,this.reset()}reset(){n.assign(this,this.blueprintFn())}}},()=>{const n=up.util;up.Cache=class{constructor(r={}){this.config=r,this.store=this.config.store||new up.store.Memory}size(){return this.store.size()}maxSize(){return n.evalOption(this.config.size)}expiryMillis(){return n.evalOption(this.config.expiry)}normalizeStoreKey(r){return this.config.key?this.config.key(r):r.toString()}isEnabled(){return this.maxSize()!==0&&this.expiryMillis()!==0}clear(){this.store.clear()}keys(){return this.store.keys()}each(r){n.each(this.keys(),e=>{const t=this.store.get(e);r(e,t.value,t.timestamp)})}makeRoomForAnotherEntry(){if(this.hasRoomForAnotherEntry())return;let r,e;this.each(function(t,s,a){(!e||e>a)&&(r=t,e=a)}),r&&this.store.remove(r)}hasRoomForAnotherEntry(){const r=this.maxSize();return!r||this.size()<r}alias(r,e){const t=this.get(r,{silent:!0});n.isDefined(t)&&this.set(e,t)}timestamp(){return new Date().valueOf()}set(r,e){if(this.isEnabled()){this.makeRoomForAnotherEntry();const t=this.normalizeStoreKey(r),s={timestamp:this.timestamp(),value:e};this.store.set(t,s)}}remove(r){const e=this.normalizeStoreKey(r);this.store.remove(e)}isFresh(r){const e=this.expiryMillis();return e?this.timestamp()-r.timestamp<e:!0}get(r){const e=this.normalizeStoreKey(r);let t=this.store.get(e);if(t){if(this.isFresh(t))return t.value;this.remove(r)}}}},()=>{up.Rect=class extends up.Record{keys(){return["left","top","width","height"]}get bottom(){return this.top+this.height}get right(){return this.left+this.width}static fromElement(o){return new this(o.getBoundingClientRect())}}},()=>{const n=up.element;up.BodyShifter=class{constructor(){this.unshiftFns=[],this.reset()}reset(){this.unshiftNow(),this.shiftCount=0}shift(){if(this.shiftCount++,this.shiftCount>1)return;const r=up.viewport.rootHasReducedWidthFromScrollbar(),e=up.viewport.rootOverflowElement();if(this.changeStyle(e,{overflowY:"hidden"}),!r)return;const{body:t}=document,s=up.viewport.scrollbarWidth(),a=n.styleNumber(t,"paddingRight"),l=s+a;this.changeStyle(t,{paddingRight:l});for(let w of up.viewport.anchoredRight()){const L=n.styleNumber(w,"right"),C=s+L;this.changeStyle(w,{right:C})}}changeStyle(r,e){this.unshiftFns.push(n.setTemporaryStyle(r,e))}unshift(){this.shiftCount--,this.shiftCount==0&&this.unshiftNow()}unshiftNow(){let r;for(;r=this.unshiftFns.pop();)r()}}},()=>{const n=up.util;up.Change=class{constructor(r){this.options=r}notApplicable(r){return up.error.notApplicable(this,r)}execute(){throw up.error.notImplemented()}onFinished(){var r,e;return(e=(r=this.options).onFinished)==null?void 0:e.call(r)}improveHistoryValue(r,e){return r===!1||n.isString(r)?r:e}}},()=>{const n=up.util,o=up.element;up.Change.Addition=class extends up.Change{constructor(e){super(e),this.responseDoc=e.responseDoc,this.acceptLayer=e.acceptLayer,this.dismissLayer=e.dismissLayer,this.eventPlans=e.eventPlans||[]}handleLayerChangeRequests(){this.layer.isOverlay()&&(this.tryAcceptLayerFromServer(),this.abortWhenLayerClosed(),this.layer.tryAcceptForLocation(),this.abortWhenLayerClosed(),this.tryDismissLayerFromServer(),this.abortWhenLayerClosed(),this.layer.tryDismissForLocation(),this.abortWhenLayerClosed()),this.layer.asCurrent(()=>{for(let e of this.eventPlans)up.emit(e),this.abortWhenLayerClosed()})}tryAcceptLayerFromServer(){n.isDefined(this.acceptLayer)&&this.layer.isOverlay()&&this.layer.accept(this.acceptLayer)}tryDismissLayerFromServer(){n.isDefined(this.dismissLayer)&&this.layer.isOverlay()&&this.layer.dismiss(this.dismissLayer)}abortWhenLayerClosed(){if(this.layer.isClosed())throw up.error.aborted("Layer was closed")}setSource({oldElement:e,newElement:t,source:s}){s==="keep"&&(s=e&&up.fragment.source(e)),s&&o.setMissingAttr(t,"up-source",n.normalizeURL(s,{hash:!1}))}}},()=>{up.Change.Removal=class extends up.Change{}},()=>{const n=up.element;up.Change.DestroyFragment=class extends up.Change.Removal{constructor(r){super(r),this.layer=up.layer.get(r)||up.layer.current,this.element=this.options.element,this.animation=this.options.animation,this.log=this.options.log}async execute(){this.parent=this.element.parentNode,up.fragment.markAsDestroying(this.element),up.motion.willAnimate(this.element,this.animation,this.options)?(this.emitDestroyed(),await this.animate(),this.wipe(),this.onFinished()):(this.wipe(),this.emitDestroyed(),this.onFinished())}animate(){return up.motion.animate(this.element,this.animation,this.options)}wipe(){this.layer.asCurrent(()=>{up.syntax.clean(this.element,{layer:this.layer}),up.browser.canJQuery()?jQuery(this.element).remove():n.remove(this.element)})}emitDestroyed(){up.fragment.emitDestroyed(this.element,{parent:this.parent,log:this.log})}}},()=>{up.Change.OpenLayer=class extends up.Change.Addition{constructor(o){super(o),this.target=o.target,this.origin=o.origin,this.baseLayer=o.baseLayer}preflightProps(){return{layer:this.baseLayer,mode:this.options.mode,context:this.buildLayer().context,target:this.target}}bestPreflightSelector(){return this.target}execute(o,r){if(this.target===":none"?this.content=document.createElement("up-none"):this.content=o.select(this.target),!this.content||this.baseLayer.isClosed())throw this.notApplicable();if(r(),up.puts("up.render()",`Opening element "${this.target}" in new overlay`),this.options.title=this.improveHistoryValue(this.options.title,o.getTitle()),this.emitOpenEvent().defaultPrevented)throw up.error.aborted("Open event was prevented");return this.baseLayer.peel(),this.layer=this.buildLayer(),up.layer.stack.push(this.layer),this.layer.createElements(this.content),this.layer.setupHandlers(),this.handleHistory(),this.setSource({newElement:this.content,source:this.options.source}),o.finalizeElement(this.content),up.hello(this.layer.element,{layer:this.layer,origin:this.origin}),this.handleLayerChangeRequests(),this.handleScroll(),this.layer.startOpenAnimation().then(()=>{this.layer.isOpen()&&this.handleFocus(),this.onFinished()}),this.layer.opening=!1,this.emitOpenedEvent(),this.abortWhenLayerClosed(),new up.RenderResult({layer:this.layer,fragments:[this.content]})}buildLayer(){const o={...this.options,opening:!0},r=e=>this.options=up.RenderOptions.finalize(e);return up.layer.build(o,r)}handleHistory(){this.layer.history==="auto"&&(this.layer.history=up.fragment.hasAutoHistory(this.content)),this.layer.parent.saveHistory(),this.layer.updateHistory(this.options)}handleFocus(){var r;(r=this.baseLayer.overlayFocus)==null||r.moveToBack(),this.layer.overlayFocus.moveToFront(),new up.FragmentFocus({fragment:this.content,layer:this.layer,autoMeans:["autofocus","layer"]}).process(this.options.focus)}handleScroll(){const o={...this.options,fragment:this.content,layer:this.layer,autoMeans:["hash","layer"]};new up.FragmentScrolling(o).process(this.options.scroll)}emitOpenEvent(){return up.emit("up:layer:open",{origin:this.origin,baseLayer:this.baseLayer,layerOptions:this.options,log:"Opening new overlay"})}emitOpenedEvent(){return this.layer.emit("up:layer:opened",{origin:this.origin,callback:this.layer.callback("onOpened"),log:`Opened new ${this.layer}`})}}},()=>{const n=up.util,o=up.element;up.Change.UpdateLayer=class extends up.Change.Addition{constructor(e){e=up.RenderOptions.finalize(e),super(e),this.layer=e.layer,this.target=e.target,this.placement=e.placement,this.context=e.context,this.parseSteps()}preflightProps(){return this.matchPreflight(),{layer:this.layer,mode:this.layer.mode,context:n.merge(this.layer.context,this.context),target:this.bestPreflightSelector()}}bestPreflightSelector(){return this.matchPreflight(),n.map(this.steps,"selector").join(", ")||":none"}execute(e,t){this.responseDoc=e,this.matchPostflight(),t(),up.puts("up.render()",`Updating "${this.bestPreflightSelector()}" in ${this.layer}`),this.options.title=this.improveHistoryValue(this.options.title,this.responseDoc.getTitle()),this.setScrollAndFocusOptions(),this.options.saveScroll&&up.viewport.saveScroll({layer:this.layer}),this.options.peel&&this.layer.peel(),n.assign(this.layer.context,this.context),this.options.history==="auto"&&(this.options.history=this.hasAutoHistory()),this.options.history&&this.layer.updateHistory(this.options),this.handleLayerChangeRequests();const s=this.steps.map(a=>this.executeStep(a));return Promise.all(s).then(()=>(this.abortWhenLayerClosed(),this.onFinished())),new up.RenderResult({layer:this.layer,fragments:n.map(this.steps,"newElement")})}async executeStep(e){switch(this.setSource(e),e.placement){case"swap":{let t=this.findKeepPlan(e);if(t)up.fragment.emitKept(t),this.handleFocus(e.oldElement,e),await this.handleScroll(e.oldElement,e);else{this.transferKeepableElements(e);const s=e.oldElement.parentNode,a={...e,beforeStart(){up.fragment.markAsDestroying(e.oldElement)},afterInsert:()=>{this.responseDoc.finalizeElement(e.newElement),e.keepPlans.forEach(this.reviveKeepable),up.hello(e.newElement,e)},beforeDetach:()=>{up.syntax.clean(e.oldElement,{layer:this.layer})},afterDetach(){o.remove(e.oldElement),up.fragment.emitDestroyed(e.oldElement,{parent:s,log:!1})},scrollNew:()=>(this.handleFocus(e.newElement,e),this.handleScroll(e.newElement,e))};await up.morph(e.oldElement,e.newElement,e.transition,a)}break}case"content":{let t=o.wrapChildren(e.oldElement),s=o.wrapChildren(e.newElement),a={...e,placement:"swap",oldElement:t,newElement:s,focus:!1};await this.executeStep(a),o.unwrap(s),await this.handleFocus(e.oldElement,e);break}case"before":case"after":{let t=o.wrapChildren(e.newElement),s=e.placement==="before"?"afterbegin":"beforeend";e.oldElement.insertAdjacentElement(s,t),this.responseDoc.finalizeElement(t),up.hello(t,e),this.handleFocus(t,e),await this.handleScroll(t,e),await up.animate(t,e.transition,e),await o.unwrap(t);break}default:up.fail("Unknown placement: %o",e.placement)}}findKeepPlan(e){if(!e.keep)return;const{oldElement:t,newElement:s}=e;let a=o.booleanOrStringAttr(t,"up-keep");if(a){a===!0&&(a="&");const l={layer:this.layer,origin:t};let w;if(e.descendantsOnly?w=up.fragment.get(s,a,l):w=up.fragment.subtree(s,a,l)[0],w&&o.matches(w,"[up-keep]")){const L={oldElement:t,newElement:w,newData:up.syntax.data(w)};if(!up.fragment.emitKeep(L).defaultPrevented)return L}}}transferKeepableElements(e){const t=[];if(e.keep)for(let s of e.oldElement.querySelectorAll("[up-keep]")){let a=this.findKeepPlan({...e,oldElement:s,descendantsOnly:!0});if(a){this.hibernateKeepable(a);const l=s.cloneNode(!0);o.replace(s,l),o.replace(a.newElement,s),t.push(a)}}e.keepPlans=t}parseSteps(){this.steps=[];for(let e of n.splitValues(this.target,","))if(e!==":none"){const t=e.match(/^(.+?)(?::(before|after))?$/);if(!t)throw up.error.invalidSelector(e);const s={...this.options,selector:t[1],placement:t[2]||this.placement||"swap"};this.steps.push(s)}}hibernateKeepable(e){let t=up.viewport.subtree(e.oldElement);e.revivers=t.map(function(s){let{scrollTop:a,scrollLeft:l}=s;return()=>n.assign(s,{scrollTop:a,scrollLeft:l})})}reviveKeepable(e){for(let t of e.revivers)t()}matchPreflight(){if(!this.matchedPreflight){for(let e of this.steps){const t=new up.FragmentFinder(e);if(e.oldElement||(e.oldElement=t.find()),!e.oldElement)throw this.notApplicable(`Could not find element "${this.target}" in current page`)}this.resolveOldNesting(),this.matchedPreflight=!0}}matchPostflight(){if(!this.matchedPostflight){this.matchPreflight();for(let e of this.steps){let t=this.responseDoc.select(e.selector);if(t)e.newElement=t;else throw this.notApplicable(`Could not find element "${this.target}" in server response`)}this.options.hungry&&this.addHungrySteps(),this.resolveOldNesting(),this.matchedPostflight=!0}}addHungrySteps(){const e=up.fragment.all(up.radio.hungrySelector(),this.options);for(let t of e){const s=up.fragment.toTarget(t),a=this.responseDoc.select(s);if(a){const l=o.booleanOrStringAttr(t,"transition"),w={selector:s,oldElement:t,newElement:a,transition:l,placement:"swap"};this.steps.push(w)}}}containedByRivalStep(e,t){return n.some(e,function(s){return s!==t&&(s.placement==="swap"||s.placement==="content")&&s.oldElement.contains(t.oldElement)})}resolveOldNesting(){let e=n.uniqBy(this.steps,"oldElement");e=n.reject(e,t=>this.containedByRivalStep(e,t)),this.steps=e}setScrollAndFocusOptions(){this.steps.forEach((e,t)=>{t>0&&(e.scroll=!1,e.focus=!1),(e.placement==="swap"||e.placement==="content")&&(e.scrollBehavior="auto",this.focusCapsule||(this.focusCapsule=up.FocusCapsule.preserveWithin(e.oldElement)))})}handleFocus(e,t){return new up.FragmentFocus({...t,fragment:e,layer:this.layer,focusCapsule:this.focusCapsule,autoMeans:up.fragment.config.autoFocus}).process(t.focus)}handleScroll(e,t){return new up.FragmentScrolling({...t,fragment:e,layer:this.layer,autoMeans:up.fragment.config.autoScroll}).process(t.scroll)}hasAutoHistory(){const e=n.map(this.steps,"oldElement");return n.some(e,t=>up.fragment.hasAutoHistory(t))}}},()=>{const n=up.util;up.Change.CloseLayer=class extends up.Change.Removal{constructor(r){var e;super(r),this.verb=r.verb,this.layer=up.layer.get(r),this.origin=r.origin,this.value=r.value,this.preventable=(e=r.preventable)!=null?e:!0}execute(){if(!this.layer.isOpen())return Promise.resolve();if(up.browser.assertConfirmed(this.options),up.network.abort(e=>e.layer===this.layer),this.emitCloseEvent().defaultPrevented&&this.preventable)throw up.error.aborted("Close event was prevented");const{parent:r}=this.layer;this.layer.peel(),this.layer.stack.remove(this.layer),r.restoreHistory(),this.handleFocus(r),this.layer.teardownHandlers(),this.layer.destroyElements(this.options),this.emitClosedEvent(r)}emitCloseEvent(){let r=this.layer.emit(this.buildEvent(`up:layer:${this.verb}`),{callback:this.layer.callback(`on${n.upperCaseFirst(this.verb)}`),log:[`Will ${this.verb} ${this.layer} with value %o`,this.value]});return this.value=r.value,r}emitClosedEvent(r){const e=`${this.verb}ed`,t=n.upperCaseFirst(e);return this.layer.emit(this.buildEvent(`up:layer:${e}`),{baseLayer:r,callback:this.layer.callback(`on${t}`),ensureBubbles:!0,log:[`${t} ${this.layer} with value %o`,this.value]})}buildEvent(r){return up.event.build(r,{layer:this.layer,value:this.value,origin:this.origin})}handleFocus(r){var t;this.layer.overlayFocus.teardown(),(t=r.overlayFocus)==null||t.moveToFront(),(this.layer.origin||r.element).focus({preventScroll:!0})}}},()=>{const n=up.util;up.Change.FromContent=class extends up.Change{constructor(r){super(r),this.layers=n.filter(up.layer.getAll(this.options),this.isRenderableLayer),this.origin=this.options.origin,this.preview=this.options.preview,this.mode=this.options.mode,this.origin&&(this.originLayer=up.layer.get(this.origin))}isRenderableLayer(r){return r==="new"||r.isOpen()}getPlans(){return this.plans||(this.plans=[],this.options.fragment&&(this.options.target=this.getResponseDoc().rootSelector()),this.expandIntoPlans(this.layers,this.options.target),this.expandIntoPlans(this.layers,this.options.fallback)),this.plans}expandIntoPlans(r,e){for(let t of r)for(let s of this.expandTargets(e,t)){const a={...this.options,target:s,layer:t,placement:this.defaultPlacement()},l=t==="new"?new up.Change.OpenLayer(a):new up.Change.UpdateLayer(a);this.plans.push(l)}}expandTargets(r,e){return up.fragment.expandTargets(r,{layer:e,mode:this.mode,origin:this.origin})}execute(){return this.options.preload?Promise.resolve():this.seekPlan(this.executePlan.bind(this))||this.postflightTargetNotApplicable()}executePlan(r){return r.execute(this.getResponseDoc(),this.onPlanApplicable.bind(this,r))}onPlanApplicable(r){let e=this.getPlans()[0];r!==e&&up.puts("up.render()","Could not match primary target (%s). Updating a fallback target (%s).",e.target,r.target)}getResponseDoc(){var r,e;if(!this.preview&&!this.responseDoc){const t=n.pick(this.options,["target","content","fragment","document","html","cspNonces"]);(e=(r=up.migrate).handleResponseDocOptions)==null||e.call(r,t),this.defaultPlacement()==="content"&&(t.target=this.firstExpandedTarget(t.target)),this.responseDoc=new up.ResponseDoc(t)}return this.responseDoc}defaultPlacement(){if(!this.options.document&&!this.options.fragment)return"content"}firstExpandedTarget(r){return this.expandTargets(r||":main",this.layers[0])[0]}preflightProps(r={}){const e=t=>t.preflightProps();return this.seekPlan(e)||r.optional||this.preflightTargetNotApplicable()}preflightTargetNotApplicable(){this.targetNotApplicable("Could not find target in current page")}postflightTargetNotApplicable(){this.targetNotApplicable("Could not find common target in current page and response")}targetNotApplicable(r){if(this.getPlans().length){const e=n.uniq(n.map(this.getPlans(),"target")),t=up.layer.optionToString(this.options.layer);up.fail(r+" (tried selectors %o in %s)",e,t)}else this.layers.length?up.fail("No target selector given"):up.fail("Layer %o does not exist",this.options.layer)}seekPlan(r){for(let e of this.getPlans())try{return r(e)}catch(t){if(!up.error.notApplicable.is(t))throw t}}}},()=>{const n=up.util;up.Change.FromURL=class extends up.Change{constructor(r){super(r),this.options.layer=up.layer.getAll(this.options),this.options.normalizeLayerOptions=!1,this.successOptions=this.options,this.failOptions=up.RenderOptions.deriveFailOptions(this.successOptions)}execute(){let r=this.newPageReason();if(r)return up.puts("up.render()",r),up.network.loadPage(this.options),n.unresolvablePromise();const e=this.makeRequest();return this.options.preload?e:n.always(e,t=>this.onRequestSettled(t))}newPageReason(){if(n.isCrossOrigin(this.options.url))return"Loading cross-origin content in new page";if(!up.browser.canPushState())return"Loading content in new page to restore history support"}makeRequest(){const r=this.preflightPropsForRenderOptions(this.successOptions),e=this.preflightPropsForRenderOptions(this.failOptions,{optional:!0}),t=n.merge(this.successOptions,r,n.renameKeys(e,up.fragment.failKey));return this.request=up.request(t),this.request}preflightPropsForRenderOptions(r,e){return new up.Change.FromContent({...r,preview:!0}).preflightProps(e)}onRequestSettled(r){if(this.response=r,r instanceof up.Response){if(this.isSuccessfulResponse())return this.updateContentFromResponse(["Loaded fragment from successful response to %s",this.request.description],this.successOptions);{const e=["Loaded fragment from failed response to %s (HTTP %d)",this.request.description,this.response.status];throw this.updateContentFromResponse(e,this.failOptions)}}else throw r}isSuccessfulResponse(){return this.successOptions.fail===!1||this.response.ok}updateContentFromResponse(r,e){return this.request.assertEmitted("up:fragment:loaded",{callback:this.options.onLoaded,response:this.response,log:r,renderOptions:e}),this.augmentOptionsFromResponse(e),new up.Change.FromContent(e).execute()}augmentOptionsFromResponse(r){const e=this.response.url;let t=e,s=this.request.hash;s&&(r.hash=s,t+=s),this.response.method==="GET"?r.source=this.improveHistoryValue(r.source,e):(r.source=this.improveHistoryValue(r.source,"keep"),r.history=!!r.location),r.location=this.improveHistoryValue(r.location,t),r.title=this.improveHistoryValue(r.title,this.response.title),r.eventPlans=this.response.eventPlans;let l=this.response.target;l&&(r.target=l),r.document=this.response.text,r.acceptLayer=this.response.acceptLayer,r.dismissLayer=this.response.dismissLayer,!r.document&&(n.isDefined(r.acceptLayer)||n.isDefined(r.dismissLayer))&&(r.target=":none"),r.context=n.merge(r.context,this.response.context),r.cspNonces=this.response.cspNonces}}},()=>{const n=up.util,o=up.element;up.CompilerPass=class{constructor(e,t,s={}){this.root=e,this.compilers=t,this.skipSubtrees=s.skip,(!this.skipSubtrees.length||!this.root.querySelector("[up-keep]"))&&(this.skipSubtrees=void 0),this.layer=s.layer||up.layer.get(this.root)||up.layer.current,this.errors=[]}run(){if(up.puts("up.hello()","Compiling fragment %o",this.root),this.layer.asCurrent(()=>{for(let e of this.compilers)this.runCompiler(e)}),this.errors.length)throw up.error.failed("Errors while compiling",{errors:this.errors})}runCompiler(e){var s,a;const t=this.select(e.selector);if(!!t.length){if(e.isDefault||up.puts("up.hello()",'Compiling "%s" on %d element(s)',e.selector,t.length),e.batch)this.compileBatch(e,t);else for(let l of t)this.compileOneElement(e,l);return(a=(s=up.migrate).postCompile)==null?void 0:a.call(s,t,e)}}compileOneElement(e,t){const a=[e.jQuery?up.browser.jQuery(t):t];if(e.length!==1){const L=up.syntax.data(t);a.push(L)}const l=this.applyCompilerFunction(e,t,a);let w=this.destructorPresence(l);w&&up.destructor(t,w)}compileBatch(e,t){const a=[e.jQuery?up.browser.jQuery(t):t];if(e.length!==1){const w=n.map(t,up.syntax.data);a.push(w)}const l=this.applyCompilerFunction(e,t,a);this.destructorPresence(l)&&up.fail("Compilers with { batch: true } cannot return destructors")}applyCompilerFunction(e,t,s){try{return e.apply(t,s)}catch(a){this.errors.push(a),up.log.error("up.hello()","While compiling %o: %o",t,a),up.error.emitGlobal(a)}}destructorPresence(e){if(n.isFunction(e)||n.isArray(e)&&n.every(e,n.isFunction))return e}select(e){let t=o.subtree(this.root,n.evalOption(e));return this.skipSubtrees&&(t=n.reject(t,s=>this.isInSkippedSubtree(s))),t}isInSkippedSubtree(e){let t;return n.contains(this.skipSubtrees,e)?!0:(t=e.parentElement)?this.isInSkippedSubtree(t):!1}}},()=>{const n=up.util,o=up.element;up.CSSTransition=class{constructor(e,t,s){this.element=e,this.lastFrameKebab=t,this.lastFrameKeysKebab=Object.keys(this.lastFrameKebab),n.some(this.lastFrameKeysKebab,a=>a.match(/A-Z/))&&up.fail("Animation keys must be kebab-case"),this.finishEvent=s.finishEvent,this.duration=s.duration,this.easing=s.easing,this.finished=!1}start(){return this.lastFrameKeysKebab.length===0?(this.finished=!0,Promise.resolve()):(this.deferred=n.newDeferred(),this.pauseOldTransition(),this.startTime=new Date,this.startFallbackTimer(),this.listenToFinishEvent(),this.listenToTransitionEnd(),this.startMotion(),this.deferred.promise())}listenToFinishEvent(){this.finishEvent&&(this.stopListenToFinishEvent=up.on(this.element,this.finishEvent,this.onFinishEvent.bind(this)))}onFinishEvent(e){e.stopPropagation(),this.finish()}startFallbackTimer(){this.fallbackTimer=n.timer(this.duration+100,()=>{this.finish()})}stopFallbackTimer(){clearTimeout(this.fallbackTimer)}listenToTransitionEnd(){this.stopListenToTransitionEnd=up.on(this.element,"transitionend",this.onTransitionEnd.bind(this))}onTransitionEnd(e){if(e.target!==this.element||new Date-this.startTime<=.25*this.duration)return;const s=e.propertyName;!n.contains(this.lastFrameKeysKebab,s)||this.finish()}finish(){var e,t;this.finished||(this.finished=!0,this.stopFallbackTimer(),(e=this.stopListenToFinishEvent)==null||e.call(this),(t=this.stopListenToTransitionEnd)==null||t.call(this),o.concludeCSSTransition(this.element),this.resumeOldTransition(),this.deferred.resolve())}pauseOldTransition(){const e=o.style(this.element,["transitionProperty","transitionDuration","transitionDelay","transitionTimingFunction"]);if(o.hasCSSTransition(e)){if(e.transitionProperty!=="all"){const t=e.transitionProperty.split(/\s*,\s*/),s=o.style(this.element,t);this.setOldTransitionTargetFrame=o.setTemporaryStyle(this.element,s)}this.setOldTransition=o.concludeCSSTransition(this.element)}}resumeOldTransition(){var e,t;(e=this.setOldTransitionTargetFrame)==null||e.call(this),(t=this.setOldTransition)==null||t.call(this)}startMotion(){o.setStyle(this.element,{transitionProperty:Object.keys(this.lastFrameKebab).join(", "),transitionDuration:`${this.duration}ms`,transitionTimingFunction:this.easing}),o.setStyle(this.element,this.lastFrameKebab)}}},()=>{const n=up.util;up.DestructorPass=class{constructor(r,e){this.fragment=r,this.options=e,this.errors=[]}run(){for(let r of this.selectCleanables()){let e=n.pluckKey(r,"upDestructors");if(e)for(let t of e)this.applyDestructorFunction(t,r);r.classList.remove("up-can-clean")}if(this.errors.length)throw up.error.failed("Errors while destroying",{errors:this.errors})}selectCleanables(){const r={...this.options,destroying:!0};return up.fragment.subtree(this.fragment,".up-can-clean",r)}applyDestructorFunction(r,e){try{r()}catch(t){this.errors.push(t),up.log.error("up.destroy()","While destroying %o: %o",e,t),up.error.emitGlobal(t)}}}},()=>{const n=up.util,o=up.element;up.EventEmitter=class extends up.Record{keys(){return["target","event","baseLayer","callback","log","ensureBubbles"]}emit(){return this.logEmission(),this.baseLayer?this.baseLayer.asCurrent(()=>this.dispatchEvent()):this.dispatchEvent(),this.event}dispatchEvent(){var e;this.target.dispatchEvent(this.event),this.ensureBubbles&&o.isDetached(this.target)&&document.dispatchEvent(this.event),(e=this.callback)==null||e.call(this,this.event)}assertEmitted(){const e=this.emit();if(e.defaultPrevented)throw up.error.aborted(`Event ${e.type} was prevented`)}logEmission(){if(!up.log.isEnabled())return;let e=this.log,t;n.isArray(e)?[e,...t]=e:t=[];const{type:s}=this.event;n.isString(e)?up.puts(s,e,...t):e!==!1&&up.puts(s,`Event ${s}`)}static fromEmitArgs(e,t={}){var l;let s=n.extractOptions(e);s=n.merge(t,s),n.isElementish(e[0])?s.target=o.get(e.shift()):e[0]instanceof up.Layer&&(s.layer=e.shift());let a;return s.layer&&(a=up.layer.get(s.layer),s.target==null&&(s.target=a.element),s.baseLayer==null&&(s.baseLayer=a)),s.baseLayer&&(s.baseLayer=up.layer.get(s.baseLayer)),n.isString(s.target)?s.target=up.fragment.get(s.target,{layer:s.layer}):s.target||(s.target=document),(l=e[0])!=null&&l.preventDefault?(s.event=e[0],s.log==null&&(s.log=e[0].log)):n.isString(e[0])?s.event=up.event.build(e[0],s):s.event=up.event.build(s),new this(s)}}},()=>{const n=up.util,o=up.element;up.EventListener=class extends up.Record{keys(){return["element","eventType","selector","callback","jQuery","guard","baseLayer","passive","once","beforeBoot"]}constructor(e){var t;super(e),this.key=this.constructor.buildKey(e),this.isDefault=up.framework.evaling,(t=this.beforeBoot)!=null||(this.beforeBoot=this.eventType.indexOf("up:framework:")===0),this.nativeCallback=this.nativeCallback.bind(this)}bind(){var e;const t=(e=this.element).upEventListeners||(e.upEventListeners={});t[this.key]&&up.fail("up.on(): The %o callback %o cannot be registered more than once",this.eventType,this.callback),t[this.key]=this,this.element.addEventListener(...this.addListenerArgs())}addListenerArgs(){const e=[this.eventType,this.nativeCallback];return this.passive&&up.browser.canPassiveEventListener()&&e.push({passive:!0}),e}unbind(){let e=this.element.upEventListeners;e&&delete e[this.key],this.element.removeEventListener(...this.addListenerArgs())}nativeCallback(e){if(up.framework.beforeBoot&&!this.beforeBoot)return;this.once&&this.unbind();let t=e.target;if(this.selector&&(t=o.closest(t,n.evalOption(this.selector))),!(this.guard&&!this.guard(e))&&t){const s=this.jQuery?up.browser.jQuery(t):t,a=[e,s],l=this.callback.length;if(l!==1&&l!==2){const L=up.syntax.data(t);a.push(L)}const w=this.callback.bind(t,...a);this.baseLayer?this.baseLayer.asCurrent(w):w()}}static fromElement(e){let t=e.element.upEventListeners;if(t){const s=this.buildKey(e);return t[s]}}static buildKey(e){var t;return(t=e.callback).upUid||(t.upUid=n.uid()),[e.eventType,e.selector,e.callback.upUid].join("|")}static allNonDefault(e){let t=e.upEventListeners;if(t){const s=n.values(t);return n.reject(s,"isDefault")}else return[]}}},()=>{const n=up.util;up.EventListenerGroup=class extends up.Record{keys(){return["elements","eventTypes","selector","callback","jQuery","guard","baseLayer","passive","once","beforeBoot"]}bind(){const r=[];return this.eachListenerAttributes(function(e){const t=new up.EventListener(e);return t.bind(),r.push(t.unbind.bind(t))}),n.sequence(r)}eachListenerAttributes(r){for(let e of this.elements)for(let t of this.eventTypes)r(this.listenerAttributes(e,t))}listenerAttributes(r,e){return{...this.attributes(),element:r,eventType:e}}unbind(){this.eachListenerAttributes(function(r){let e=up.EventListener.fromElement(r);e&&e.unbind()})}static fromBindArgs(r,e){r=n.copy(r);const t=r.pop();let s;r[0].addEventListener?s=[r.shift()]:n.isJQuery(r[0])||n.isList(r[0])&&r[0][0].addEventListener?s=r.shift():s=[document];let a=n.splitValues(r.shift()),l=up.migrate.fixEventTypes;l&&(a=l(a));const w=n.extractOptions(r),L=r[0],C={elements:s,eventTypes:a,selector:L,callback:t,...w,...e};return new this(C)}}},()=>{const n=up.util,o=up.element;up.FieldObserver=class{constructor(e,t,s){this.scheduleValues=this.scheduleValues.bind(this),this.isNewValues=this.isNewValues.bind(this),this.callback=s,this.fields=o.list(e),this.delay=t.delay,this.batch=t.batch}start(){this.scheduledValues=null,this.processedValues=this.readFieldValues(),this.currentTimer=void 0,this.callbackRunning=!1,this.unbind=up.on(this.fields,"input change",()=>this.check())}stop(){this.unbind(),this.cancelTimer()}cancelTimer(){clearTimeout(this.currentTimer),this.currentTimer=void 0}scheduleTimer(){this.cancelTimer(),this.currentTimer=n.timer(this.delay,()=>{this.currentTimer=void 0,this.requestCallback()})}scheduleValues(e){this.scheduledValues=e,this.scheduleTimer()}isNewValues(e){return!n.isEqual(e,this.processedValues)&&!n.isEqual(this.scheduledValues,e)}async requestCallback(){if(this.scheduledValues!==null&&!this.currentTimer&&!this.callbackRunning){const e=this.changedValues(this.processedValues,this.scheduledValues);this.processedValues=this.scheduledValues,this.scheduledValues=null,this.callbackRunning=!0;const t=[];if(this.batch)t.push(this.callback(e));else for(let s in e){const a=e[s];t.push(this.callback(a,s))}await n.allSettled(t),this.callbackRunning=!1,this.requestCallback()}}changedValues(e,t){const s={};let a=Object.keys(e);a=a.concat(Object.keys(t)),a=n.uniq(a);for(let l of a){const w=e[l],L=t[l];n.isEqual(w,L)||(s[l]=L)}return s}readFieldValues(){return up.Params.fromFields(this.fields).toObject()}check(){const e=this.readFieldValues();this.isNewValues(e)&&this.scheduleValues(e)}}},()=>{const n=up.element,o=["selectionStart","selectionEnd","scrollLeft","scrollTop"];function r(t,s){for(let a of o)try{s[a]=t[a]}catch{}}function e(t){const s=document.activeElement;if(n.isInSubtree(t,s))return s}up.FocusCapsule=class extends up.Record{keys(){return["selector","oldElement"].concat(o)}restore(s,a){if(!this.wasLost())return;let l=n.get(s,this.selector);if(l)return r(this,l),up.focus(l,a),!0}static preserveWithin(s){let a=e(s);if(a){const l={oldElement:s,selector:up.fragment.toTarget(a)};return r(a,l),new this(l)}}wasLost(){return!e(this.oldElement)}}},()=>{const n=up.util;up.FragmentProcessor=class extends up.Record{keys(){return["fragment","autoMeans","origin","layer"]}process(r){return this.tryProcess(r)}tryProcess(r){if(n.isArray(r))return n.find(r,e=>this.tryProcess(e));if(n.isFunction(r))return this.tryProcess(r(this.fragment,this.attributes()));if(n.isElement(r))return this.processElement();if(n.isString(r)){if(r==="auto")return this.tryProcess(this.autoMeans);let e=r.match(/^(.+?)-if-(.+?)$/);if(e)return this.resolveCondition(e[2])&&this.process(e[1])}return this.processPrimitive(r)}resolveCondition(r){if(r==="main")return up.fragment.contains(this.fragment,":main")}findSelector(r){const e={layer:this.layer,origin:this.origin};let t=up.fragment.get(this.fragment,r,e)||up.fragment.get(r,e);if(t)return t;up.warn("up.render()",'Could not find an element matching "%s"',r)}}},()=>{const n=/^([^ >+(]+) (.+)$/;up.FragmentFinder=class{constructor(r){this.options=r,this.origin=this.options.origin,this.selector=this.options.selector,this.layer=this.options.layer}find(){return this.findAroundOrigin()||this.findInLayer()}findAroundOrigin(){if(this.origin&&up.fragment.config.matchAroundOrigin&&!up.element.isDetached(this.origin))return this.findClosest()||this.findInVicinity()}findClosest(){return up.fragment.closest(this.origin,this.selector,this.options)}findInVicinity(){let r=this.selector.match(n);if(r){let e=up.fragment.closest(this.origin,r[1],this.options);if(e)return up.fragment.getDumb(e,r[2])}}findInLayer(){return up.fragment.getDumb(this.selector,this.options)}}},()=>{const n=up.util,o=up.element,r={preventScroll:!0};up.FragmentFocus=class extends up.FragmentProcessor{keys(){return super.keys().concat(["hash","focusCapsule"])}processPrimitive(t){switch(t){case"keep":return this.restoreFocus();case"target":case!0:return this.focusElement(this.fragment);case"layer":return this.focusElement(this.layer.getFocusElement());case"main":return this.focusSelector(":main");case"hash":return this.focusHash();case"autofocus":return this.autofocus();default:if(n.isString(t))return this.focusSelector(t)}}processElement(t){return this.focusElement(t)}resolveCondition(t){return t==="lost"?this.wasFocusLost():super.resolveCondition(t)}focusSelector(t){let s=this.findSelector(t);if(s)return this.focusElement(s)}restoreFocus(){var t;return(t=this.focusCapsule)==null?void 0:t.restore(this.fragment,r)}autofocus(){let t=o.subtree(this.fragment,"[autofocus]")[0];if(t)return up.focus(t,r),!0}focusElement(t){return up.viewport.makeFocusable(t),up.focus(t,r),!0}focusHash(){let t=up.viewport.firstHashTarget(this.hash,{layer:this.layer});if(t)return this.focusElement(t)}wasFocusLost(){var t;return(t=this.focusCapsule)==null?void 0:t.wasLost()}}},()=>{const n=up.element,o=up.util;up.FragmentPolling=class{constructor(e){this.options={},this.state="initialized",this.setFragment(e)}static forFragment(e){return e.upPolling||(e.upPolling=new this(e))}onPollAttributeObserved(){this.start()}onFragmentDestroyed(){this.stop()}start(){this.state!=="started"&&(this.state="started",this.scheduleReload())}stop(){this.state==="started"&&(clearTimeout(this.reloadTimer),this.state="stopped")}forceStart(e){o.assign(this.options,e),this.forceStarted=!0,this.start()}forceStop(){this.stop(),this.forceStarted=!1}scheduleReload(e=this.getInterval()){this.reloadTimer=setTimeout(()=>this.reload(),e)}reload(){if(this.state==="started")if(up.radio.shouldPoll(this.fragment)){let e={url:this.options.url,guardEvent:up.event.build("up:fragment:poll",{log:"Polling fragment"})};o.always(up.reload(this.fragment,e),t=>this.onReloaded(t))}else{up.puts("[up-poll]","Polling is disabled");let e=Math.min(10*1e3,this.getInterval());this.scheduleReload(e)}}onReloaded(e){var s;let t=(s=e==null?void 0:e.fragments)==null?void 0:s[0];t?this.onFragmentSwapped(t):this.scheduleReload()}onFragmentSwapped(e){e.upPolling=this,delete this.fragment.upPolling,this.setFragment(e),this.state==="stopped"&&this.forceStarted&&this.start()}setFragment(e){this.fragment=e,up.destructor(e,()=>this.onFragmentDestroyed())}getInterval(){var e,t;return(t=(e=this.options.interval)!=null?e:n.numberAttr(this.fragment,"up-interval"))!=null?t:up.radio.config.pollInterval}}},()=>{const n=up.util;up.FragmentScrolling=class extends up.FragmentProcessor{keys(){return super.keys().concat(["hash","mode","revealTop","revealMax","revealSnap","scrollBehavior","scrollSpeed"])}constructor(r){var e,t;(t=(e=up.migrate).handleScrollOptions)==null||t.call(e,r),super(r)}process(r){return super.process(r)||Promise.resolve()}processPrimitive(r){switch(r){case"reset":return this.reset();case"layer":return this.revealLayer();case"main":return this.revealSelector(":main");case"restore":return this.restore();case"hash":return this.hash&&up.viewport.revealHash(this.hash,this.attributes());case"target":case"reveal":case!0:return this.revealElement(this.fragment);default:if(n.isString(r))return this.revealSelector(r)}}processElement(r){return this.revealElement(r)}revealElement(r){return up.reveal(r,this.attributes())}revealSelector(r){let e=this.findSelector(r);if(e)return this.revealElement(e)}revealLayer(){return this.revealElement(this.layer.getBoxElement())}reset(){return up.viewport.resetScroll({...this.attributes(),around:this.fragment})}restore(){return up.viewport.restoreScroll({...this.attributes(),around:this.fragment})}}},()=>{const n=up.util,o=up.element;up.HTMLWrapper=class{constructor(e){this.tagName=e;const t=`<${this.tagName}[^>]*>`,s=`</${this.tagName}>`,a="(.|\\s)*?";this.pattern=new RegExp(t+a+s,"ig"),this.attrName=`up-wrapped-${this.tagName}`}strip(e){return e.replace(this.pattern,"")}wrap(e){return e.replace(this.pattern,this.wrapMatch.bind(this))}wrapMatch(e){return this.didWrap=!0,'<meta name="'+this.attrName+'" value="'+n.escapeHTML(e)+'">'}unwrap(e){if(!!this.didWrap)for(let t of e.querySelectorAll(`meta[name='${this.attrName}']`)){const s=t.getAttribute("value"),a=o.createFromHTML(s);o.replace(t,a)}}}},()=>{const n=up.element,o=up.util;up.Layer=class extends up.Record{keys(){return["element","stack","history","mode","context","lastScrollTops"]}defaults(){return{context:{},lastScrollTops:new up.Cache({size:30,key:up.history.normalizeURL})}}constructor(e={}){if(super(e),!this.mode)throw"missing { mode } option"}setupHandlers(){up.link.convertClicks(this)}teardownHandlers(){}mainTargets(){return up.layer.mainTargets(this.mode)}sync(){}accept(){throw up.error.notImplemented()}dismiss(){throw up.error.notImplemented()}peel(e){this.stack.peel(this,e)}evalOption(e){return o.evalOption(e,this)}isCurrent(){return this.stack.isCurrent(this)}isFront(){return this.stack.isFront(this)}isRoot(){return this.stack.isRoot(this)}isOverlay(){return this.stack.isOverlay(this)}isOpen(){return this.stack.isOpen(this)}isClosed(){return this.stack.isClosed(this)}get parent(){return this.stack.parentOf(this)}get child(){return this.stack.childOf(this)}get ancestors(){return this.stack.ancestorsOf(this)}get descendants(){return this.stack.descendantsOf(this)}get index(){return this.stack.indexOf(this)}getContentElement(){return this.contentElement||this.element}getBoxElement(){return this.boxElement||this.element}getFocusElement(){return this.getBoxElement()}getFirstSwappableElement(){throw up.error.notImplemented()}contains(e){return n.closest(e,up.layer.anySelector())===this.element}on(...e){return this.buildEventListenerGroup(e).bind()}off(...e){return this.buildEventListenerGroup(e).unbind()}buildEventListenerGroup(e){return up.EventListenerGroup.fromBindArgs(e,{guard:t=>this.containsEventTarget(t),elements:[this.element],baseLayer:this})}containsEventTarget(e){return this.contains(e.target)}wasHitByMouseEvent(e){const t=document.elementFromPoint(e.clientX,e.clientY);return!t||this.contains(t)}buildEventEmitter(e){return up.EventEmitter.fromEmitArgs(e,{layer:this})}emit(...e){return this.buildEventEmitter(e).emit()}isDetached(){return n.isDetached(this.element)}saveHistory(){this.isHistoryVisible()&&(this.savedTitle=document.title,this.savedLocation=up.history.location)}restoreHistory(){!this.showsLiveHistory()||(this.savedLocation&&up.history.push(this.savedLocation),this.savedTitle&&(document.title=this.savedTitle))}asCurrent(e){return this.stack.asCurrent(this,e)}updateHistory(e){o.isString(e.title)&&(this.title=e.title),o.isString(e.location)&&(this.location=e.location)}isHistoryVisible(){return this.history&&(this.isRoot()||this.parent.isHistoryVisible())}showsLiveHistory(){return this.isHistoryVisible()&&this.isFront()&&(up.history.config.enabled||this.isRoot())}get title(){return this.showsLiveHistory()?document.title:this.savedTitle}set title(e){this.savedTitle=e,this.showsLiveHistory()&&(document.title=e)}get location(){return this.showsLiveHistory()?up.history.location:this.savedLocation}set location(e){const t=this.location;e=up.history.normalizeURL(e),t!==e&&(this.savedLocation=e,this.emit("up:layer:location:changed",{location:e,log:!1}),this.showsLiveHistory()&&up.history.push(e))}selector(e){return this.constructor.selector(e)}static selector(e){throw up.error.notImplemented()}toString(){throw up.error.notImplemented()}affix(...e){return n.affix(this.getFirstSwappableElement(),...e)}[o.isEqual.key](e){return this.constructor===e.constructor&&this.element===e.element}}},()=>{const n=up.element,o=up.util;up.Layer.Overlay=class extends up.Layer{keys(){return super.keys().concat(["position","align","size","origin","class","backdrop","openAnimation","closeAnimation","openDuration","closeDuration","openEasing","closeEasing","backdropOpenAnimation","backdropCloseAnimation","dismissable","dismissLabel","dismissAriaLabel","onOpened","onAccept","onAccepted","onDismiss","onDismissed","acceptEvent","dismissEvent","acceptLocation","dismissLocation","opening"])}constructor(e){super(e),this.dismissable===!0?this.dismissable=["button","key","outside"]:this.dismissable===!1?this.dismissable=[]:this.dismissable=o.splitValues(this.dismissable),this.acceptLocation&&(this.acceptLocation=new up.URLPattern(this.acceptLocation)),this.dismissLocation&&(this.dismissLocation=new up.URLPattern(this.dismissLocation))}callback(e){let t=this[e];if(t)return t.bind(this)}createElement(e){this.nesting||(this.nesting=this.suggestVisualNesting());const t=o.compactObject(o.pick(this,["align","position","size","class","nesting"]));this.element=this.affixPart(e,null,t)}createBackdropElement(e){this.backdropElement=this.affixPart(e,"backdrop")}createViewportElement(e){this.viewportElement=this.affixPart(e,"viewport",{"up-viewport":""})}createBoxElement(e){this.boxElement=this.affixPart(e,"box")}createContentElement(e,t){this.contentElement=this.affixPart(e,"content"),this.contentElement.appendChild(t)}createDismissElement(e){return this.dismissElement=this.affixPart(e,"dismiss",{"up-dismiss":'":button"',"aria-label":this.dismissAriaLabel}),n.affix(this.dismissElement,'span[aria-hidden="true"]',{text:this.dismissLabel})}affixPart(e,t,s={}){return n.affix(e,this.selector(t),s)}static selector(e){return o.compact(["up",this.mode,e]).join("-")}suggestVisualNesting(){const{parent:e}=this;return this.mode===e.mode?1+e.suggestVisualNesting():0}setupHandlers(){var e,t;super.setupHandlers(),this.overlayFocus=new up.OverlayFocus(this),this.supportsDismissMethod("button")&&this.createDismissElement(this.getBoxElement()),this.supportsDismissMethod("outside")&&(this.viewportElement?up.on(this.viewportElement,"up:click",s=>{s.target===this.viewportElement&&this.onOutsideClicked(s,!0)}):this.unbindParentClicked=this.parent.on("up:click",(s,a)=>{const l=this.origin&&this.origin.contains(a);this.onOutsideClicked(s,l)})),this.supportsDismissMethod("key")&&(this.unbindEscapePressed=up.event.onEscape(s=>this.onEscapePressed(s))),this.registerClickCloser("up-accept",(s,a)=>{this.accept(s,a)}),this.registerClickCloser("up-dismiss",(s,a)=>{this.dismiss(s,a)}),(t=(e=up.migrate).registerLayerCloser)==null||t.call(e,this),this.registerEventCloser(this.acceptEvent,this.accept),this.registerEventCloser(this.dismissEvent,this.dismiss)}onOutsideClicked(e,t){t&&up.event.halt(e),this.dismiss(":outside",{origin:e.target})}onEscapePressed(e){if(this.isFront()){let t=up.form.focusedField();t?t.blur():this.supportsDismissMethod("key")&&(up.event.halt(e),this.dismiss(":key"))}}registerClickCloser(e,t){let s=`[${e}]`;this.on("up:click",s,function(a){up.event.halt(a);const l=n.closest(a.target,s),w=n.jsonAttr(l,e),L={origin:l},C=new up.OptionsParser(L,l);C.booleanOrString("animation"),C.string("easing"),C.number("duration"),C.string("confirm"),t(w,L)})}registerEventCloser(e,t){if(!!e)return this.on(e,s=>{s.preventDefault(),t.call(this,s)})}tryAcceptForLocation(){this.tryCloseForLocation(this.acceptLocation,this.accept)}tryDismissForLocation(){this.tryCloseForLocation(this.dismissLocation,this.dismiss)}tryCloseForLocation(e,t){let s,a;if(e&&(s=this.location)&&(a=e.recognize(s))){const l={...a,location:s};t.call(this,l)}}teardownHandlers(){var e,t;super.teardownHandlers(),(e=this.unbindParentClicked)==null||e.call(this),(t=this.unbindEscapePressed)==null||t.call(this),this.overlayFocus.teardown()}destroyElements(e){const a={...e,animation:()=>this.startCloseAnimation(e),onFinished:()=>{var l;this.onElementsRemoved(),(l=e.onFinished)==null||l.call(e)},log:!1};up.destroy(this.element,a)}onElementsRemoved(){}startAnimation(e={}){const t=up.animate(this.getBoxElement(),e.boxAnimation,e);let s;return this.backdrop&&!up.motion.isNone(e.boxAnimation)&&(s=up.animate(this.backdropElement,e.backdropAnimation,e)),Promise.all([t,s])}startOpenAnimation(e={}){var t;return this.startAnimation({boxAnimation:(t=e.animation)!=null?t:this.evalOption(this.openAnimation),backdropAnimation:"fade-in",easing:e.easing||this.openEasing,duration:e.duration||this.openDuration}).then(()=>this.wasEverVisible=!0)}startCloseAnimation(e={}){var s;const t=this.wasEverVisible&&((s=e.animation)!=null?s:this.evalOption(this.closeAnimation));return this.startAnimation({boxAnimation:t,backdropAnimation:"fade-out",easing:e.easing||this.closeEasing,duration:e.duration||this.closeDuration})}accept(e=null,t={}){return this.executeCloseChange("accept",e,t)}dismiss(e=null,t={}){return this.executeCloseChange("dismiss",e,t)}supportsDismissMethod(e){return o.contains(this.dismissable,e)}executeCloseChange(e,t,s){return s={...s,verb:e,value:t,layer:this},new up.Change.CloseLayer(s).execute()}getFirstSwappableElement(){return this.getContentElement().children[0]}toString(){return`${this.mode} overlay`}}},()=>{up.Layer.OverlayWithTether=class extends up.Layer.Overlay{createElements(o){this.origin||up.fail("Missing { origin } option"),this.tether=new up.Tether({anchor:this.origin,align:this.align,position:this.position}),this.createElement(this.tether.parent),this.createContentElement(this.element,o),this.tether.start(this.element)}onElementsRemoved(){this.tether.stop()}sync(){this.isOpen()&&(this.isDetached()||this.tether.isDetached()?this.dismiss(":detached",{animation:!1,preventable:!1}):this.tether.sync())}}},()=>{var n;up.Layer.OverlayWithViewport=(n=class extends up.Layer.Overlay{static getParentElement(){return document.body}createElements(r){this.shiftBody(),this.createElement(this.constructor.getParentElement()),this.backdrop&&this.createBackdropElement(this.element),this.createViewportElement(this.element),this.createBoxElement(this.viewportElement),this.createContentElement(this.boxElement,r)}onElementsRemoved(){this.unshiftBody()}shiftBody(){this.constructor.bodyShifter.shift()}unshiftBody(){this.constructor.bodyShifter.unshift()}sync(){this.isDetached()&&this.isOpen()&&this.constructor.getParentElement().appendChild(this.element)}},n.bodyShifter=new up.BodyShifter,n)},()=>{var n;const o=up.util,r=up.element;up.Layer.Root=(n=class extends up.Layer{constructor(t){super(t),this.setupHandlers()}get element(){return r.root}getFirstSwappableElement(){return document.body}static selector(){return"html"}setupHandlers(){this.element.upHandlersApplied||(this.element.upHandlersApplied=!0,super.setupHandlers())}sync(){this.setupHandlers()}accept(){this.cannotCloseRoot()}dismiss(){this.cannotCloseRoot()}cannotCloseRoot(){throw up.error.failed("Cannot close the root layer")}reset(){o.assign(this,this.defaults())}toString(){return"root layer"}},n.mode="root",n)},()=>{var n;up.Layer.Modal=(n=class extends up.Layer.OverlayWithViewport{},n.mode="modal",n)},()=>{var n;up.Layer.Popup=(n=class extends up.Layer.OverlayWithTether{},n.mode="popup",n)},()=>{var n;up.Layer.Drawer=(n=class extends up.Layer.OverlayWithViewport{},n.mode="drawer",n)},()=>{var n;up.Layer.Cover=(n=class extends up.Layer.OverlayWithViewport{},n.mode="cover",n)},()=>{const n=up.util,o=up.element;up.LayerLookup=class{constructor(e,...t){this.stack=e;const s=n.parseArgIntoOptions(t,"layer");if(s.normalizeLayerOptions!==!1&&up.layer.normalizeOptions(s),this.values=n.splitValues(s.layer),this.origin=s.origin,this.baseLayer=s.baseLayer||this.originLayer()||this.stack.current,n.isString(this.baseLayer)){const a={...s,baseLayer:this.stack.current,normalizeLayerOptions:!1};this.baseLayer=new this.constructor(this.stack,this.baseLayer,a).first()}}originLayer(){if(this.origin)return this.forElement(this.origin)}first(){return this.all()[0]}all(){let e=n.flatMap(this.values,t=>this.resolveValue(t));return e=n.compact(e),e=n.uniq(e),e}forElement(e){return e=o.get(e),n.find(this.stack.reversed(),t=>t.contains(e))}forIndex(e){return this.stack[e]}resolveValue(e){if(e instanceof up.Layer)return e;if(n.isNumber(e))return this.forIndex(e);if(/^\d+$/.test(e))return this.forIndex(Number(e));if(n.isElementish(e))return this.forElement(e);switch(e){case"any":return[this.baseLayer,...this.stack.reversed()];case"current":return this.baseLayer;case"closest":return this.stack.selfAndAncestorsOf(this.baseLayer);case"parent":return this.baseLayer.parent;case"ancestor":case"ancestors":return this.baseLayer.ancestors;case"child":return this.baseLayer.child;case"descendant":case"descendants":return this.baseLayer.descendants;case"new":return"new";case"root":return this.stack.root;case"overlay":case"overlays":return n.reverse(this.stack.overlays);case"front":return this.stack.front;case"origin":return this.originLayer();default:return up.fail("Unknown { layer } option: %o",e)}}}},()=>{const n=up.util;up.LayerStack=class extends Array{constructor(){super(),Object.setPrototypeOf(this,up.LayerStack.prototype),this.currentOverrides=[],this.push(this.buildRoot())}buildRoot(){return up.layer.build({mode:"root",stack:this})}remove(r){n.remove(this,r)}peel(r,e){const t=n.reverse(r.descendants),s={...e,preventable:!1};for(let a of t)a.dismiss(":peel",s)}reset(){this.peel(this.root,{animation:!1}),this.currentOverrides=[],this.root.reset()}isOpen(r){return r.index>=0}isClosed(r){return!this.isOpen(r)}parentOf(r){return this[r.index-1]}childOf(r){return this[r.index+1]}ancestorsOf(r){return n.reverse(this.slice(0,r.index))}selfAndAncestorsOf(r){return[r,...r.ancestors]}descendantsOf(r){return this.slice(r.index+1)}isRoot(r){return this[0]===r}isOverlay(r){return!this.isRoot(r)}isCurrent(r){return this.current===r}isFront(r){return this.front===r}get(...r){return this.getAll(...r)[0]}getAll(...r){return new up.LayerLookup(this,...r).all()}sync(){for(let r of this)r.sync()}asCurrent(r,e){try{return this.currentOverrides.push(r),e()}finally{this.currentOverrides.pop()}}reversed(){return n.reverse(this)}dismissOverlays(r=null,e={}){e.dismissable=!1;for(let t of n.reverse(this.overlays))t.dismiss(r,e)}[n.copy.key](){return n.copyArrayLike(this)}get count(){return this.length}get root(){return this[0]}get overlays(){return this.root.descendants}get current(){return n.last(this.currentOverrides)||this.front}get front(){return n.last(this)}}},()=>{up.LinkFeedbackURLs=class{constructor(o){const r=up.feedback.normalizeURL;if(this.isSafe=up.link.isSafe(o),this.isSafe){const e=o.getAttribute("href");e&&e!=="#"&&(this.href=r(e));const t=o.getAttribute("up-href");t&&(this.upHREF=r(t));const s=o.getAttribute("up-alias");s&&(this.aliasPattern=new up.URLPattern(s,r))}}isCurrent(o){return this.isSafe&&!!(this.href&&this.href===o||this.upHREF&&this.upHREF===o||this.aliasPattern&&this.aliasPattern.test(o,!1))}}},()=>{const n=up.util,o=up.element;up.LinkPreloader=class{constructor(){this.considerPreload=this.considerPreload.bind(this)}observeLink(e){up.link.isSafe(e)&&(this.on(e,"mouseenter",t=>this.considerPreload(t,!0)),this.on(e,"mousedown touchstart",t=>this.considerPreload(t)),this.on(e,"mouseleave",t=>this.stopPreload(t)))}on(e,t,s){up.on(e,t,{passive:!0},s)}considerPreload(e,t){const s=e.target;s!==this.currentLink&&(this.reset(),this.currentLink=s,up.link.shouldFollowEvent(e,s)&&(t?this.preloadAfterDelay(s):this.preloadNow(s)))}stopPreload(e){if(e.target===this.currentLink)return this.reset()}reset(){var e;!this.currentLink||(clearTimeout(this.timer),(e=this.currentRequest)!=null&&e.preload&&this.currentRequest.abort(),this.currentLink=void 0,this.currentRequest=void 0)}preloadAfterDelay(e){var s;const t=(s=o.numberAttr(e,"up-delay"))!=null?s:up.link.config.preloadDelay;this.timer=n.timer(t,()=>this.preloadNow(e))}preloadNow(e){if(o.isDetached(e)){this.reset();return}const t=s=>this.currentRequest=s;up.log.muteUncriticalRejection(up.link.preload(e,{onQueued:t})),this.queued=!0}}},()=>{const n=up.util,o=up.element;up.MotionController=class{constructor(e){this.activeClass=`up-${e}`,this.dataKey=`up-${e}-finished`,this.selector=`.${this.activeClass}`,this.finishEvent=`up:${e}:finish`,this.finishCount=0,this.clusterCount=0}async startFunction(e,t,s={}){var l;e=o.list(e);const a=()=>up.log.muteUncriticalRejection(t());if(s.trackMotion=(l=s.trackMotion)!=null?l:up.motion.isEnabled(),s.trackMotion===!1)await n.microtask(a);else{s.trackMotion=!1,await this.finish(e);let w=this.whileForwardingFinishEvent(e,a);return this.markCluster(e,w),w=w.then(()=>this.unmarkCluster(e)),await w}}startMotion(e,t,s={}){const a=()=>t.start(),l=()=>t.finish(),w=up.on(e,this.finishEvent,l);let L=this.startFunction(e,a,s);return L=L.then(w),L}finish(e){if(this.finishCount++,this.clusterCount===0||!up.motion.isEnabled())return Promise.resolve();e=this.expandFinishRequest(e);const t=n.map(e,this.finishOneElement.bind(this));return Promise.all(t)}expandFinishRequest(e){return e?n.flatMap(e,t=>o.list(o.closest(t,this.selector),o.all(t,this.selector))):o.all(this.selector)}isActive(e){return e.classList.contains(this.activeClass)}finishOneElement(e){return this.emitFinishEvent(e),this.whenElementFinished(e)}emitFinishEvent(e,t={}){return t={target:e,log:!1,...t},up.emit(this.finishEvent,t)}whenElementFinished(e){return e[this.dataKey]||Promise.resolve()}markCluster(e,t){this.clusterCount++;for(let s of e)s.classList.add(this.activeClass),s[this.dataKey]=t}unmarkCluster(e){this.clusterCount--;for(let t of e)t.classList.remove(this.activeClass),delete t[this.dataKey]}whileForwardingFinishEvent(e,t){if(e.length<2)return t();const s=l=>{if(!l.forwarded)for(let w of e)w!==l.target&&this.isActive(w)&&this.emitFinishEvent(w,{forwarded:!0})},a=up.on(e,this.finishEvent,s);return t().then(a)}async reset(){await this.finish(),this.finishCount=0,this.clusterCount=0}}},()=>{const n=up.util,o=up.element;up.NonceableCallback=class{constructor(e,t){this.script=e,this.nonce=t}static fromString(e){let t=e.match(/^(nonce-([^\s]+)\s)?(.*)$/);return new this(t[3],t[2])}toFunction(...e){if(up.browser.canEval())return new Function(...e,this.script);if(this.nonce){let t=this;return function(...s){return t.runAsNoncedFunction(this,e,s)}}else return this.cannotRun.bind(this)}toString(){return`nonce-${this.nonce} ${this.script}`}cannotRun(){throw new Error(`Your Content Security Policy disallows inline JavaScript (${this.script}). See https://unpoly.com/csp for solutions.`)}runAsNoncedFunction(e,t,s){let a=`
      try {
        up.noncedEval.value = (function(${t.join(",")}) {
          ${this.script}
        }).apply(up.noncedEval.thisArg, up.noncedEval.args)
      } catch (error) {
        up.noncedEval.error = error
      }
    `,l;try{if(up.noncedEval={args:s,thisArg:e},l=up.element.affix(document.body,"script",{nonce:this.nonce,text:a}),up.noncedEval.error)throw up.noncedEval.error;return up.noncedEval.value}finally{up.noncedEval=void 0,l&&up.element.remove(l)}}allowedBy(e){return this.nonce&&n.contains(e,this.nonce)}static adoptNonces(e,t){if(!(t!=null&&t.length))return;const s=n.memoize(up.protocol.cspNonce);n.each(up.protocol.config.nonceableAttributes,a=>{let l=o.subtree(e,`[${a}^="nonce-"]`);n.each(l,w=>{let L=w.getAttribute(a),C=this.fromString(L),N=(I,..._)=>up.log.warn("up.render()",`Cannot use callback [${a}="${L}"]: ${I}`,..._);if(!C.allowedBy(t))return N("Callback's CSP nonce (%o) does not match response header (%o)",C.nonce,t);let q=s();if(!q)return N("Current page's CSP nonce is unknown");C.nonce=q,w.setAttribute(a,C.toString())})})}}},()=>{const n=up.util,o=up.element;up.OptionsParser=class{constructor(e,t,s){this.options=e,this.element=t,this.fail=s==null?void 0:s.fail}string(e,t){this.parse(o.attr,e,t)}boolean(e,t){this.parse(o.booleanAttr,e,t)}number(e,t){this.parse(o.numberAttr,e,t)}booleanOrString(e,t){this.parse(o.booleanOrStringAttr,e,t)}json(e,t){this.parse(o.jsonAttr,e,t)}parse(e,t,s={}){var C;const a=n.wrapList((C=s.attr)!=null?C:this.attrNameForKey(t));let l=this.options[t];if(this.element)for(let N of a)l!=null||(l=e(this.element,N));l!=null||(l=s.default);let w=s.normalize;w&&(l=w(l)),n.isDefined(l)&&(this.options[t]=l);let L;if((s.fail||this.fail)&&(L=up.fragment.failKey(t))){const N=n.compact(n.map(a,this.deriveFailAttrName)),q={...s,attr:N,fail:!1};this.parse(e,L,q)}}deriveFailAttrName(e){if(e.indexOf("up-")===0)return`up-fail-${e.slice(3)}`}attrNameForKey(e){return`up-${n.camelToKebabCase(e)}`}}},()=>{const n=up.element,o=up.util;up.OverlayFocus=class{constructor(e){this.layer=e,this.focusElement=this.layer.getFocusElement()}moveToFront(){this.enabled||(this.enabled=!0,this.untrapFocus=up.on("focusin",e=>this.onFocus(e)),this.unsetAttrs=n.setTemporaryAttrs(this.focusElement,{tabindex:"0",role:"dialog","aria-modal":"true"}),this.focusTrapBefore=n.affix(this.focusElement,"beforebegin","up-focus-trap[tabindex=0]"),this.focusTrapAfter=n.affix(this.focusElement,"afterend","up-focus-trap[tabindex=0]"))}moveToBack(){this.teardown()}teardown(){!this.enabled||(this.enabled=!1,this.untrapFocus(),this.unsetAttrs(),n.remove(this.focusTrapBefore),n.remove(this.focusTrapAfter))}onFocus(e){const{target:t}=e;this.processingFocusEvent||(this.processingFocusEvent=!0,t===this.focusTrapBefore?this.focusEnd():(t===this.focusTrapAfter||!this.layer.contains(t))&&this.focusStart(),this.processingFocusEvent=!1)}focusStart(e){up.focus(this.focusElement,e)}focusEnd(){this.focusLastDescendant(this.layer.getBoxElement())||this.focusStart()}focusLastDescendant(e){for(let t of o.reverse(e.children))if(up.viewport.tryFocus(t)||this.focusLastDescendant(t))return!0}}},()=>{const n=up.util,o=up.element;up.Params=class{constructor(e){this.clear(),this.addAll(e)}clear(){this.entries=[]}[n.copy.key](){return new up.Params(this)}toObject(){const e={};for(let t of this.entries){const{name:s,value:a}=t;n.isBasicObjectProperty(s)||(this.isArrayKey(s)?(e[s]||(e[s]=[]),e[s].push(a)):e[s]=a)}return e}toArray(){return this.entries}toFormData(){const e=new FormData;for(let t of this.entries)e.append(t.name,t.value);return e.entries||(e.originalArray=this.entries),e}toQuery(){let e=n.map(this.entries,this.arrayEntryToQuery.bind(this));return e=n.compact(e),e.join("&")}arrayEntryToQuery(e){const{value:t}=e;if(this.isBinaryValue(t))return;let s=encodeURIComponent(e.name);return n.isGiven(t)&&(s+="=",s+=encodeURIComponent(t)),s}isBinaryValue(e){return e instanceof Blob}hasBinaryValues(){const e=n.map(this.entries,"value");return n.some(e,this.isBinaryValue)}toURL(e){let t=[e,this.toQuery()];t=n.filter(t,n.isPresent);const s=n.contains(e,"?")?"&":"?";return t.join(s)}add(e,t){this.entries.push({name:e,value:t})}addAll(e){n.isMissing(e)||(e instanceof this.constructor?this.entries.push(...e.entries):n.isArray(e)?this.entries.push(...e):n.isString(e)?this.addAllFromQuery(e):n.isFormData(e)?this.addAllFromFormData(e):n.isObject(e)?this.addAllFromObject(e):up.fail("Unsupport params type: %o",e))}addAllFromObject(e){for(let t in e){const s=e[t],a=n.isArray(s)?s:[s];for(let l of a)this.add(t,l)}}addAllFromQuery(e){for(let t of e.split("&"))if(t){let[s,a]=t.split("=");s=decodeURIComponent(s),n.isGiven(a)?a=decodeURIComponent(a):a=null,this.add(s,a)}}addAllFromFormData(e){n.eachIterator(e.entries(),t=>{this.add(...t)})}set(e,t){this.delete(e),this.add(e,t)}delete(e){this.entries=n.reject(this.entries,this.matchEntryFn(e))}matchEntryFn(e){return t=>t.name===e}get(e){return this.isArrayKey(e)?this.getAll(e):this.getFirst(e)}getFirst(e){const t=n.find(this.entries,this.matchEntryFn(e));return t==null?void 0:t.value}getAll(e){if(this.isArrayKey(e))return this.getAll(e);{const t=n.map(this.entries,this.matchEntryFn(e));return n.map(t,"value")}}isArrayKey(e){return n.endsWith(e,"[]")}[n.isBlank.key](){return this.entries.length===0}static fromForm(e){return e=up.fragment.get(e),this.fromFields(up.form.fields(e))}static fromFields(e){const t=new this;for(let s of n.wrapList(e))t.addField(s);return t}addField(e){e=o.get(e);let t=e.name;if(t&&!e.disabled){const{tagName:s}=e,{type:a}=e;if(s==="SELECT")for(let l of e.querySelectorAll("option"))l.selected&&this.add(t,l.value);else if(a==="checkbox"||a==="radio")e.checked&&this.add(t,e.value);else if(a==="file")for(let l of e.files)this.add(t,l);else return this.add(t,e.value)}}[n.isEqual.key](e){return this.constructor===e.constructor&&n.isEqual(this.entries,e.entries)}static fromURL(e){const t=new this;let a=n.parseURL(e).search;return a&&(a=a.replace(/^\?/,""),t.addAll(a)),t}static stripURL(e){return n.normalizeURL(e,{search:!1})}}},()=>{const n=up.element,o=300;up.ProgressBar=class{constructor(){this.step=0,this.element=n.affix(document.body,"up-progress-bar"),this.element.style.transition=`width ${o}ms ease-out`,this.moveTo(0),up.element.paint(this.element),this.width=31,this.nextStep()}nextStep(){let e;this.width<80?Math.random()<.15?e=7+5*Math.random():e=1.5+.5*Math.random():e=.13*(100-this.width)*Math.random(),this.moveTo(this.width+e),this.step++;const t=o+this.step*40;this.timeout=setTimeout(this.nextStep.bind(this),t)}moveTo(e){this.width=e,this.element.style.width=`${e}vw`}destroy(){clearTimeout(this.timeout),n.remove(this.element)}conclude(){clearTimeout(this.timeout),this.moveTo(100),setTimeout(this.destroy.bind(this),o)}}},()=>{const n=up.util;up.RenderOptions=function(){const o={hungry:!0,keep:!0,source:!0,saveScroll:!0,fail:"auto"},r={solo:!1,confirm:!1,feedback:!1},t=["url","method","origin","headers","params","cache","clearCache","fallback","solo","confirm","feedback","origin","baseLayer","fail"].concat(["keep","hungry","history","source","saveScroll","navigate"]),s=["url","content","fragment","document"],a=["history","focus","scroll"];function l(_){if(_.navigate)return up.fragment.config.navigateOptions}function w(_){if(_.preload)return r}function L(_){var X,Q;(Q=(X=up.migrate).preprocessRenderOptions)==null||Q.call(X,_);const V=n.merge(o,l(_));return n.merge(n.omit(V,a),{defaults:V},_,w(_))}function C(_,V){return n.merge(_.defaults,V,_)}function N(_){n.some(s,V=>n.isGiven(_[V]))||(_.defaultToEmptyContent?_.content="":up.fail("up.render() needs either { "+s.join(", ")+" } option"))}function q(_){const V={};for(let X in _){const Q=_[X];let E=up.fragment.successKey(X);E&&(V[E]=Q)}return V}function I(_){return n.merge(_.defaults,n.pick(_,t),q(_))}return{preprocess:L,finalize:C,assertContentGiven:N,deriveFailOptions:I}}()},()=>{up.RenderResult=class extends up.Record{keys(){return["fragments","layer"]}}},()=>{const n=up.util;up.Request=class extends up.Record{keys(){return["method","url","hash","params","target","failTarget","headers","timeout","preload","cache","clearCache","layer","mode","context","failLayer","failMode","failContext","origin","solo","queueTime","wrapMethod","contentType","payload","onQueued"]}constructor(r){if(super(r),this.params=new up.Params(this.params),this.headers||(this.headers={}),this.preload&&(this.cache=!0),this.wrapMethod==null&&(this.wrapMethod=up.network.config.wrapMethod),this.normalizeForCaching(),!r.basic){const e={origin:this.origin};this.layer=up.layer.get(this.layer,e),this.failLayer=up.layer.get(this.failLayer||this.layer,e),this.context||(this.context=this.layer.context||{}),this.failContext||(this.failContext=this.failLayer.context||{}),this.mode||(this.mode=this.layer.mode),this.failMode||(this.failMode=this.failLayer.mode),this.deferred=n.newDeferred(),this.state="new"}}get xhr(){var r;return(r=this._xhr)!=null?r:this._xhr=new XMLHttpRequest}followState(r){n.delegate(this,["deferred","state","preload"],()=>r)}normalizeForCaching(){this.method=n.normalizeMethod(this.method),this.extractHashFromURL(),this.transferParamsToURL(),this.url=n.normalizeURL(this.url)}evictExpensiveAttrs(){n.task(()=>(this.layer=void 0,this.failLayer=void 0,this.origin=void 0))}extractHashFromURL(){var e;let r=(e=this.url)==null?void 0:e.match(/^([^#]*)(#.+)$/);if(r)return this.url=r[1],this.hash=r[2]}transferParamsToURL(){!this.url||this.allowsPayload()||n.isBlank(this.params)||(this.url=this.params.toURL(this.url),this.params.clear())}isSafe(){return up.network.isSafeMethod(this.method)}allowsPayload(){return n.methodAllowsPayload(this.method)}will302RedirectWithGET(){return this.isSafe()||this.method==="POST"}willCache(){return this.cache==="auto"?up.network.config.autoCache(this):this.cache}runQueuedCallbacks(){var r;n.always(this,()=>this.evictExpensiveAttrs()),(r=this.onQueued)==null||r.call(this,this)}load(){this.state==="new"&&(this.state="loading",new up.Request.XHRRenderer(this).buildAndSend({onload:()=>this.onXHRLoad(),onerror:()=>this.onXHRError(),ontimeout:()=>this.onXHRTimeout(),onabort:()=>this.onXHRAbort()}))}loadPage(){up.network.abort(),new up.Request.FormRenderer(this).buildAndSubmit()}onXHRLoad(){const r=this.extractResponseFromXHR(),e=["Server responded HTTP %d to %s %s (%d characters)",r.status,this.method,this.url,r.text.length];this.emit("up:request:loaded",{request:r.request,response:r,log:e}),this.respondWith(r)}onXHRError(){const r="Fatal error during request";this.deferred.reject(up.error.failed(r)),this.emit("up:request:fatal",{log:r})}onXHRTimeout(){this.setAbortedState("Requested timed out")}onXHRAbort(){this.setAbortedState()}abort(){this.setAbortedState()&&this._xhr&&this._xhr.abort()}setAbortedState(r=["Request to %s %s was aborted",this.method,this.url]){if(!(this.state!=="new"&&this.state!=="loading"))return this.state="aborted",this.emit("up:request:aborted",{log:r}),this.deferred.reject(up.error.aborted(r)),!0}respondWith(r){if(this.state==="loading")return this.state="loaded",r.ok?this.deferred.resolve(r):this.deferred.reject(r)}csrfHeader(){return up.protocol.csrfHeader()}csrfParam(){return up.protocol.csrfParam()}csrfToken(){if(!this.isSafe()&&!this.isCrossOrigin())return up.protocol.csrfToken()}isCrossOrigin(){return n.isCrossOrigin(this.url)}extractResponseFromXHR(){const r={method:this.method,url:this.url,request:this,xhr:this.xhr,text:this.xhr.responseText,status:this.xhr.status,title:up.protocol.titleFromXHR(this.xhr),target:up.protocol.targetFromXHR(this.xhr),acceptLayer:up.protocol.acceptLayerFromXHR(this.xhr),dismissLayer:up.protocol.dismissLayerFromXHR(this.xhr),eventPlans:up.protocol.eventPlansFromXHR(this.xhr),context:up.protocol.contextFromXHR(this.xhr),clearCache:up.protocol.clearCacheFromXHR(this.xhr)};let e=up.protocol.methodFromXHR(this.xhr),t=up.protocol.locationFromXHR(this.xhr);return t&&(!e&&!n.matchURLs(r.url,t)&&(e="GET"),r.url=t),e&&(r.method=e),new up.Response(r)}cacheKey(){return JSON.stringify([this.method,this.url,this.params.toQuery(),this.metaProps()])}metaProps(){const r={};for(let e of n.evalOption(up.network.config.requestMetaKeys,this)){const t=this[e];n.isGiven(t)&&(r[e]=t)}return r}buildEventEmitter(r){return up.EventEmitter.fromEmitArgs(r,{layer:this.layer,request:this,origin:this.origin})}emit(...r){return this.buildEventEmitter(r).emit()}assertEmitted(...r){this.buildEventEmitter(r).assertEmitted()}get description(){return this.method+" "+this.url}},n.delegate(up.Request.prototype,["then","catch","finally"],function(){return this.deferred}),up.Request.tester=function(o){if(n.isFunction(o))return o;if(o instanceof this)return r=>o===r;if(n.isString(o)){let r=new up.URLPattern(o);return e=>r.test(e.url)}else return r=>o}},()=>{let n=up.util;up.Request.Cache=class extends up.Cache{maxSize(){return up.network.config.cacheSize}expiryMillis(){return up.network.config.cacheExpiry}normalizeStoreKey(r){return n.wrapValue(up.Request,r).cacheKey()}clear(r=!0){let e=up.Request.tester(r);this.each((t,s)=>{e(s)&&this.store.remove(t)})}}},()=>{const n=up.util;up.Request.Queue=class{constructor(r={}){var e,t;this.concurrency=(e=r.concurrency)!=null?e:()=>up.network.config.concurrency,this.badResponseTime=(t=r.badResponseTime)!=null?t:()=>up.network.config.badResponseTime,this.reset()}reset(){this.queuedRequests=[],this.currentRequests=[],clearTimeout(this.checkSlowTimout),this.emittedSlow=!1}get allRequests(){return this.currentRequests.concat(this.queuedRequests)}asap(r){r.runQueuedCallbacks(),n.always(r,e=>this.onRequestSettled(r,e)),r.queueTime=new Date,this.setSlowTimer(),this.hasConcurrencyLeft()?this.sendRequestNow(r):this.queueRequest(r)}promoteToForeground(r){if(r.preload)return r.preload=!1,this.setSlowTimer()}setSlowTimer(){const r=n.evalOption(this.badResponseTime);this.checkSlowTimout=n.timer(r,()=>this.checkSlow())}hasConcurrencyLeft(){const r=n.evalOption(this.concurrency);return r===-1||this.currentRequests.length<r}isBusy(){return this.currentRequests.length>0}queueRequest(r){this.queuedRequests.push(r)}pluckNextRequest(){let r=n.find(this.queuedRequests,e=>!e.preload);return r||(r=this.queuedRequests[0]),n.remove(this.queuedRequests,r)}sendRequestNow(r){r.emit("up:request:load",{log:["Loading %s %s",r.method,r.url]}).defaultPrevented?r.abort("Prevented by event listener"):(r.normalizeForCaching(),this.currentRequests.push(r),r.load())}onRequestSettled(r,e){n.remove(this.currentRequests,r),e instanceof up.Response&&e.ok&&up.network.registerAliasForRedirect(r,e),this.checkSlow(),n.microtask(()=>this.poke())}poke(){let r;if(this.hasConcurrencyLeft()&&(r=this.pluckNextRequest()))return this.sendRequestNow(r)}abort(r=!0){let e=up.Request.tester(r);for(let t of[this.currentRequests,this.queuedRequests])n.filter(t,e).forEach(function(a){a.abort(),n.remove(t,a)})}abortExcept(r,e=!0){const t=r.cacheKey();this.abort(s=>s.cacheKey()!==t&&n.evalOption(e,s))}checkSlow(){const r=this.isSlow();this.emittedSlow!==r&&(this.emittedSlow=r,r?up.emit("up:request:late",{log:"Server is slow to respond"}):up.emit("up:request:recover",{log:"Slow requests were loaded"}))}isSlow(){const r=new Date,e=n.evalOption(this.badResponseTime),t=n.reject(this.allRequests,"preload"),s=1;return n.some(t,a=>r-a.queueTime>=e-s)}}},()=>{const n=up.util,o=up.element,r=["GET","POST"];up.Request.FormRenderer=class{constructor(t){this.request=t}buildAndSubmit(){this.params=n.copy(this.request.params);let t=this.request.url,{method:s}=this.request;const a=up.Params.fromURL(t);this.params.addAll(a),t=up.Params.stripURL(t),n.contains(r,s)||(s=up.protocol.wrapMethod(s,this.params)),this.form=o.affix(document.body,"form.up-request-loader",{method:s,action:t});let l=this.request.contentType;l&&this.form.setAttribute("enctype",l);let w,L;(w=this.request.csrfParam())&&(L=this.request.csrfToken())&&this.params.add(w,L),n.each(this.params.toArray(),this.addField.bind(this)),up.browser.submitForm(this.form)}addField(t){o.affix(this.form,"input[type=hidden]",t)}}},()=>{const n="application/x-www-form-urlencoded",o="multipart/form-data",r=up.util;up.Request.XHRRenderer=class{constructor(t){this.request=t}buildAndSend(t){const s=this.request.xhr;this.params=r.copy(this.request.params),this.request.timeout&&(s.timeout=this.request.timeout),s.open(this.getMethod(),this.request.url);const a=this.request.metaProps();for(let C in a)this.addHeader(s,up.protocol.headerize(C),a[C]);for(let C in this.request.headers)this.addHeader(s,C,this.request.headers[C]);let l,w;(l=this.request.csrfHeader())&&(w=this.request.csrfToken())&&this.addHeader(s,l,w),this.addHeader(s,up.protocol.headerize("version"),up.version);let L=this.getContentType();L&&this.addHeader(s,"Content-Type",L),r.assign(s,t),s.send(this.getPayload())}getMethod(){return this.method||(this.method=this.request.method,this.request.wrapMethod&&!this.request.will302RedirectWithGET()&&(this.method=up.protocol.wrapMethod(this.method,this.params))),this.method}getContentType(){return this.finalizePayload(),this.contentType}getPayload(){return this.finalizePayload(),this.payload}addHeader(t,s,a){(r.isOptions(a)||r.isArray(a))&&(a=JSON.stringify(a)),t.setRequestHeader(s,a)}finalizePayload(){this.payloadFinalized||(this.payloadFinalized=!0,this.payload=this.request.payload,this.contentType=this.request.contentType,!this.payload&&this.request.allowsPayload()&&(this.contentType||(this.contentType=this.params.hasBinaryValues()?o:n),this.contentType===o?(this.contentType=null,this.payload=this.params.toFormData()):this.payload=this.params.toQuery().replace(/%20/g,"+")))}}},()=>{up.Response=class extends up.Record{keys(){return["method","url","text","status","request","xhr","target","title","acceptLayer","dismissLayer","eventPlans","context","clearCache","headers"]}defaults(){return{headers:{}}}get ok(){return this.status&&this.status>=200&&this.status<=299}getHeader(o){var r;return this.headers[o]||((r=this.xhr)==null?void 0:r.getResponseHeader(o))}get contentType(){return this.getHeader("Content-Type")}get cspNonces(){return up.protocol.cspNoncesFromHeader(this.getHeader("Content-Security-Policy"))}get json(){return this.parsedJSON||(this.parsedJSON=JSON.parse(this.text))}}},()=>{const n=up.util,o=up.element;up.ResponseDoc=class{constructor(e){this.noscriptWrapper=new up.HTMLWrapper("noscript"),this.scriptWrapper=new up.HTMLWrapper("script"),this.root=this.parseDocument(e)||this.parseFragment(e)||this.parseContent(e),this.cspNonces=e.cspNonces}parseDocument(e){return this.parse(e.document,o.createDocumentFromHTML)}parseContent(e){let t=e.content||"";const s=e.target||up.fail("must pass a { target } when passing { content }"),a=o.createFromSelector(s);return n.isString(t)?(t=this.wrapHTML(t),a.innerHTML=t):a.appendChild(t),a}parseFragment(e){return this.parse(e.fragment)}parse(e,t=o.createFromHTML){return n.isString(e)&&(e=this.wrapHTML(e),e=t(e)),e}rootSelector(){return up.fragment.toTarget(this.root)}wrapHTML(e){return e=this.noscriptWrapper.wrap(e),up.fragment.config.runScripts?e=this.scriptWrapper.wrap(e):e=this.scriptWrapper.strip(e),e}getTitle(){var e;return this.titleParsed||(this.title=(e=this.root.querySelector("head title"))==null?void 0:e.textContent,this.titleParsed=!0),this.title}select(e){return up.fragment.subtree(this.root,e,{layer:"any"})[0]}finalizeElement(e){this.noscriptWrapper.unwrap(e),up.NonceableCallback.adoptNonces(e,this.cspNonces),this.scriptWrapper.unwrap(e)}}},()=>{const n=up.element,o=up.util;up.RevealMotion=class{constructor(e,t={}){var a,l,w,L,C,N,q,I;this.element=e,this.options=t;const s=up.viewport.config;this.viewport=n.get(this.options.viewport)||up.viewport.get(this.element),this.obstructionsLayer=up.layer.get(this.viewport),this.snap=(l=(a=this.options.snap)!=null?a:this.options.revealSnap)!=null?l:s.revealSnap,this.padding=(L=(w=this.options.padding)!=null?w:this.options.revealPadding)!=null?L:s.revealPadding,this.top=(N=(C=this.options.top)!=null?C:this.options.revealTop)!=null?N:s.revealTop,this.max=(I=(q=this.options.max)!=null?q:this.options.revealMax)!=null?I:s.revealMax,this.topObstructions=s.fixedTop,this.bottomObstructions=s.fixedBottom}start(){const e=this.getViewportRect(this.viewport),t=up.Rect.fromElement(this.element);if(this.max){const l=o.evalOption(this.max,this.element);t.height=Math.min(t.height,l)}if(this.addPadding(t),this.substractObstructions(e),e.height<0)return up.error.failed.async("Viewport has no visible area");const s=this.viewport.scrollTop;let a=s;if(this.top||t.height>e.height){const l=t.top-e.top;a+=l}else t.top<e.top?a-=e.top-t.top:t.bottom>e.bottom&&(a+=t.bottom-e.bottom);return o.isNumber(this.snap)&&a<this.snap&&t.top<.5*e.height&&(a=0),a!==s?this.scrollTo(a):Promise.resolve()}scrollTo(e){return this.scrollMotion=new up.ScrollMotion(this.viewport,e,this.options),this.scrollMotion.start()}getViewportRect(){return up.viewport.isRoot(this.viewport)?new up.Rect({left:0,top:0,width:up.viewport.rootWidth(),height:up.viewport.rootHeight()}):up.Rect.fromElement(this.viewport)}addPadding(e){e.top-=this.padding,e.height+=2*this.padding}selectObstructions(e){let t=up.fragment.all(e.join(","),{layer:this.obstructionsLayer});return o.filter(t,n.isVisible)}substractObstructions(e){for(let t of this.selectObstructions(this.topObstructions)){let a=up.Rect.fromElement(t).bottom-e.top;a>0&&(e.top+=a,e.height-=a)}for(let t of this.selectObstructions(this.bottomObstructions)){let s=up.Rect.fromElement(t),a=e.bottom-s.top;a>0&&(e.height-=a)}}finish(){var e;(e=this.scrollMotion)==null||e.finish()}}},()=>{const n=up.util,o=.065;up.ScrollMotion=class{constructor(e,t,s={}){var a,l,w,L;this.scrollable=e,this.targetTop=t,this.behavior=(l=(a=s.behavior)!=null?a:s.scrollBehavior)!=null?l:"auto",this.speed=((L=(w=s.speed)!=null?w:s.scrollSpeed)!=null?L:up.viewport.config.scrollSpeed)*o}start(){return new Promise((e,t)=>{this.resolve=e,this.reject=t,this.behavior==="smooth"&&up.motion.isEnabled()?this.startAnimation():this.finish()})}startAnimation(){this.startTime=Date.now(),this.startTop=this.scrollable.scrollTop,this.topDiff=this.targetTop-this.startTop,this.duration=Math.sqrt(Math.abs(this.topDiff))/this.speed,requestAnimationFrame(()=>this.animationFrame())}animationFrame(){if(this.settled)return;const t=Date.now()-this.startTime,s=Math.min(t/this.duration,1);this.frameTop=this.startTop+n.simpleEase(s)*this.topDiff,Math.abs(this.targetTop-this.frameTop)<.3?this.finish():(this.scrollable.scrollTop=this.frameTop,requestAnimationFrame(()=>this.animationFrame()))}abort(e){this.settled=!0,this.reject(up.error.aborted(e))}finish(){this.settled=!0,this.scrollable.scrollTop=this.targetTop,this.resolve()}}},()=>{const n=up.element,o=up.util;up.Selector=class{constructor(e,t=[]){this.selectors=e,this.filters=t,this.unionSelector=this.selectors.join(",")||"match-none"}matches(e){return n.matches(e,this.unionSelector)&&this.passesFilter(e)}closest(e){let t;if(this.matches(e))return e;if(t=e.parentElement)return this.closest(t)}passesFilter(e){return o.every(this.filters,t=>t(e))}descendants(e){const t=o.flatMap(this.selectors,s=>n.all(e,s));return o.filter(t,s=>this.passesFilter(s))}subtree(e){const t=[];return this.matches(e)&&t.push(e),t.push(...this.descendants(e)),t}}},()=>{const n=up.util;up.store||(up.store={}),up.store.Memory=class{constructor(){this.data={}}clear(){this.data={}}get(r){return this.data[r]}set(r,e){this.data[r]=e}remove(r){delete this.data[r]}keys(){return Object.keys(this.data)}size(){return this.keys().length}values(){return n.values(this.data)}}},()=>{up.store.Session=class extends up.store.Memory{constructor(o){super(),this.rootKey=o,this.loadFromSessionStorage()}clear(){super.clear(),this.saveToSessionStorage()}set(o,r){super.set(o,r),this.saveToSessionStorage()}remove(o){super.remove(o),this.saveToSessionStorage()}loadFromSessionStorage(){try{let o=sessionStorage==null?void 0:sessionStorage.getItem(this.rootKey);o&&(this.data=JSON.parse(o))}catch{}}saveToSessionStorage(){const o=JSON.stringify(this.data);try{return sessionStorage==null?void 0:sessionStorage.setItem(this.rootKey,o)}catch{}}}},()=>{const n=up.util,o=up.element;up.Tether=class{constructor(e){var t,s;(s=(t=up.migrate).handleTetherOptions)==null||s.call(t,e),this.anchor=e.anchor,this.align=e.align,this.position=e.position,this.alignAxis=this.position==="top"||this.position==="bottom"?"horizontal":"vertical",this.viewport=up.viewport.get(this.anchor),this.parent=this.viewport===o.root?document.body:this.viewport,this.syncOnScroll=!this.viewport.contains(this.anchor.offsetParent)}start(e){this.element=e,this.element.style.position="absolute",this.setOffset(0,0),this.sync(),this.changeEventSubscription("on")}stop(){this.changeEventSubscription("off")}changeEventSubscription(e){let t=this.scheduleSync.bind(this);up[e](window,"resize",t),this.syncOnScroll&&up[e](this.viewport,"scroll",t)}scheduleSync(){return clearTimeout(this.syncTimer),this.syncTimer=n.task(this.sync.bind(this))}isDetached(){return o.isDetached(this.parent)||o.isDetached(this.anchor)}sync(){const e=this.element.getBoundingClientRect(),t={top:o.styleNumber(this.element,"marginTop"),right:o.styleNumber(this.element,"marginRight"),bottom:o.styleNumber(this.element,"marginBottom"),left:o.styleNumber(this.element,"marginLeft")},s=this.anchor.getBoundingClientRect();let a,l;switch(this.alignAxis){case"horizontal":{switch(this.position){case"top":l=s.top-t.bottom-e.height;break;case"bottom":l=s.top+s.height+t.top;break}switch(this.align){case"left":a=s.left+t.left;break;case"center":a=s.left+.5*(s.width-e.width);break;case"right":a=s.left+s.width-e.width-t.right;break}break}case"vertical":{switch(this.align){case"top":l=s.top+t.top;break;case"center":l=s.top+.5*(s.height-e.height);break;case"bottom":l=s.top+s.height-e.height-t.bottom;break}switch(this.position){case"left":a=s.left-t.right-e.width;break;case"right":a=s.left+s.width+t.left;break}break}}n.isDefined(a)||n.isDefined(l)?this.moveTo(a,l):up.fail("Invalid tether constraints: %o",this.describeConstraints())}describeConstraints(){return{position:this.position,align:this.align}}moveTo(e,t){const s=this.element.getBoundingClientRect();this.setOffset(e-s.left+this.offsetLeft,t-s.top+this.offsetTop)}setOffset(e,t){this.offsetLeft=e,this.offsetTop=t,o.setStyle(this.element,{left:e,top:t})}}},()=>{const n=up.util;up.URLPattern=class{constructor(r,e=n.normalizeURL){this.normalizeURL=e,this.groups=[];const t=[],s=[];for(let a of n.splitValues(r))a[0]==="-"?s.push(a.substring(1)):t.push(a);this.positiveRegexp=this.buildRegexp(t,!0),this.negativeRegexp=this.buildRegexp(s,!1)}buildRegexp(r,e){if(!r.length)return;r=r.map(s=>(s[0]==="*"&&(s="/"+s),s=this.normalizeURL(s),s=n.escapeRegExp(s),s));let t=r.join("|");return t=t.replace(/\\\*/g,".*?"),t=t.replace(/(:|\\\$)([a-z][\w-]*)/ig,(s,a,l)=>a==="\\$"?(e&&this.groups.push({name:l,cast:Number}),"(\\d+)"):(e&&this.groups.push({name:l,cast:String}),"([^/?#]+)")),new RegExp("^(?:"+t+")$")}test(r,e=!0){return e&&(r=this.normalizeURL(r)),this.positiveRegexp.test(r)&&!this.isExcluded(r)}recognize(r,e=!0){e&&(r=this.normalizeURL(r));let t=this.positiveRegexp.exec(r);if(t&&!this.isExcluded(r)){const s={};return this.groups.forEach((a,l)=>{let w=t[l+1];if(w)return s[a.name]=a.cast(w)}),s}}isExcluded(r){var e;return(e=this.negativeRegexp)==null?void 0:e.test(r)}}},()=>{up.framework=function(){let n="evaling";function o(){up.emit("up:framework:reset",{log:!1})}function r(){if(n!=="configuring"){console.error("Unpoly has already booted");return}let L=up.framework.supportIssue();L?console.error("Unpoly cannot boot: %s",L):(n="booting",up.emit("up:framework:boot",{log:!1}),n="booted")}function e(){let L=document.currentScript;if(L!=null&&L.async||(L==null?void 0:L.getAttribute("up-boot"))==="manual"||document.readyState==="complete")return!0}function t(){up.emit("up:framework:evaled",{log:!1}),e()?console.debug("Call up.boot() after you have configured Unpoly"):document.addEventListener("DOMContentLoaded",r),n="configuring"}function s(){if(n!=="configuring")throw new Error("Unpoly extensions must be loaded before booting");n="evaling"}function a(){n="configuring"}function l(){return!w()}function w(){if(!up.browser.canPromise())return"Browser doesn't support promises";if(document.compatMode==="BackCompat")return"Browser is in quirks mode (missing DOCTYPE?)";if(up.browser.isEdge18())return"Edge 18 or lower is unsupported"}return{onEvaled:t,boot:r,startExtension:s,stopExtension:a,reset:o,get evaling(){return n==="evaling"},get booted(){return n==="booted"},get beforeBoot(){return n!=="booting"&&n!=="booted"},isSupported:l,supportIssue:w}}(),up.boot=up.framework.boot},()=>{up.event=function(){const n=up.util,o=up.element;function r(){for(let E of[window,document,o.root,document.body])for(let P of up.EventListener.allNonDefault(E))P.unbind()}function e(...E){return a(E).bind()}function t(...E){return a(E,{jQuery:!0}).bind()}function s(...E){return a(E).unbind()}function a(E,P){return up.EventListenerGroup.fromBindArgs(E,P)}function l(E){return up.EventEmitter.fromEmitArgs(E)}function w(...E){return l(E).emit()}function L(...E){const P=n.extractOptions(E),y=E[0]||P.type||up.fail("Expected event type to be passed as string argument or { type } property"),f=document.createEvent("Event");if(f.initEvent(y,!0,!0),n.assign(f,n.omit(P,["type","target"])),up.browser.isIE11()){const O=f.preventDefault;f.preventDefault=function(){return O.call(f),n.getter(f,"defaultPrevented",()=>!0)}}return f}function C(...E){return l(E).assertEmitted()}function N(E){return e("keydown",function(P){if(q(P))return E(P)})}function q(E){const{key:P}=E;return P==="Escape"||P==="Esc"}function I(E){E.stopImmediatePropagation(),E.preventDefault()}const _=["metaKey","shiftKey","ctrlKey","altKey"];function V(E){return(n.isUndefined(E.button)||E.button===0)&&!n.some(_,P=>E[P])}function X(E,P,y=[]){const f=up.event.build(P,n.pick(E,y));return f.originalEvent=E,["stopPropagation","stopImmediatePropagation","preventDefault"].forEach(function(O){const D=f[O];return f[O]=function(){return E[O](),D.call(f)}}),E.defaultPrevented&&f.preventDefault(),f}function Q(E,P){if(!V(E))return;const y=o.attr(P,"up-emit"),f=o.jsonAttr(P,"up-emit-props"),O=X(E,y);n.assign(O,f),up.emit(P,O)}return e("up:click","a[up-emit]",Q),e("up:framework:reset",r),{on:e,$on:t,off:s,build:L,emit:w,assertEmitted:C,onEscape:N,halt:I,isUnmodified:V,fork:X,keyModifiers:_}}(),up.on=up.event.on,up.$on=up.event.$on,up.off=up.event.off,up.$off=up.event.off,up.emit=up.event.emit},()=>{up.protocol=function(){const n=up.util,o=up.element,r=function(D){return"X-Up"+D.replace(/(^.|[A-Z])/g,T=>"-"+T.toUpperCase())},e=function(D,J,T=n.identity){let K=D.getResponseHeader(r(J));if(K)return T(K)};function t(D){switch(D){case"true":return!0;case"false":return!1;default:return D}}function s(D){return e(D,"clearCache",t)}function a(D){return e(D,"context",JSON.parse)}function l(D){return e(D,"method",n.normalizeMethod)}function w(D){return e(D,"events",JSON.parse)}function L(D){return e(D,"acceptLayer",JSON.parse)}function C(D){return e(D,"dismissLayer",JSON.parse)}const N=n.memoize(function(){return n.normalizeMethod(up.browser.popCookie("_up_method"))});function q(D){return e(D,"location")||D.responseURL}function I(D){return e(D,"title")}function _(D){return e(D,"target")}const V=new up.Config(()=>({methodParam:"_method",csrfParam(){return o.metaContent("csrf-param")},csrfToken(){return o.metaContent("csrf-token")},cspNonce(){return o.metaContent("csp-nonce")},csrfHeader:"X-CSRF-Token",nonceableAttributes:["up-observe","up-on-accepted","up-on-dismissed","up-on-loaded","up-on-finished","up-observe"]}));function X(){return n.evalOption(V.csrfHeader)}function Q(){return n.evalOption(V.csrfParam)}function E(){return n.evalOption(V.csrfToken)}function P(){return n.evalOption(V.cspNonce)}function y(D){let J=[];if(D){let T=D.split(/\s*;\s*/);for(let K of T)if(K.indexOf("script-src")===0){let re=/'nonce-([^']+)'/g,S;for(;S=re.exec(K);)J.push(S[1])}}return J}function f(D,J){return J.add(V.methodParam,D),"POST"}function O(){V.reset()}return up.on("up:framework:reset",O),{config:V,reset:O,locationFromXHR:q,titleFromXHR:I,targetFromXHR:_,methodFromXHR:l,acceptLayerFromXHR:L,contextFromXHR:a,dismissLayerFromXHR:C,eventPlansFromXHR:w,clearCacheFromXHR:s,csrfHeader:X,csrfParam:Q,csrfToken:E,cspNonce:P,initialRequestMethod:N,headerize:r,wrapMethod:f,cspNoncesFromHeader:y}}()},()=>{up.log=function(){const n=new up.store.Session("up.log"),o=new up.Config(()=>({enabled:n.get("enabled"),banner:!0,format:up.browser.canFormatLog()}));function r(){o.reset()}function e(...q){o.enabled&&a("log",...q)}const t=(...q)=>a("warn",...q),s=(...q)=>a("error",...q);function a(q,I,_,...V){_&&(o.format?(V.unshift(""),V.unshift("color: #666666; padding: 1px 3px; border: 1px solid #bbbbbb; border-radius: 2px; font-size: 90%; display: inline-block"),_=`%c${I}%c ${_}`):_=`[${I}] ${_}`,console[q](_,...V))}function l(){if(!o.banner)return;const q=` __ _____  ___  ___  / /_ __
/ // / _ \\/ _ \\/ _ \\/ / // /  ${up.version}
\\___/_//_/ .__/\\___/_/\\_. / 
        / /            / /

`;let I="";up.migrate.loaded||(I+=`Load unpoly-migrate.js to enable deprecated APIs.

`),o.enabled?I+="Call `up.log.disable()` to disable logging for this session.":I+="Call `up.log.enable()` to enable logging for this session.";const _="color: #777777";o.format?console.log("%c"+q+"%c"+I,"font-family: monospace;"+_,_):console.log(q+I)}up.on("up:framework:boot",l),up.on("up:framework:reset",r);function w(q){n.set("enabled",q),o.enabled=q}function L(){w(!0)}function C(){w(!1)}function N(q){return q.catch(function(I){if(typeof I!="object"||I.name!=="AbortError"&&!(I instanceof up.RenderResult)&&!(I instanceof up.Response))throw I})}return{puts:e,error:s,warn:t,config:o,enable:L,disable:C,muteUncriticalRejection:N,isEnabled(){return o.enabled}}}(),up.puts=up.log.puts,up.warn=up.log.warn},()=>{up.syntax=function(){const n=up.util,o=up.element,r={"[up-back]":-100,"[up-content]":-200,"[up-drawer]":-200,"[up-modal]":-200,"[up-cover]":-200,"[up-popup]":-200,"[up-tooltip]":-200,"[up-dash]":-200,"[up-expand]":-300,"[data-method]":-400,"[data-confirm]":-400};let e=[],t=[];function s(...E){const P=N(E);return q(e,P)}function a(...E){const P=s(...E);P.jQuery=!0}function l(...E){const P=N(E);return up.framework.evaling&&(P.priority=L(P.selector)||up.fail("Unregistered priority for system macro %o",P.selector)),q(t,P)}function w(...E){const P=l(...E);return P.jQuery=!0,P}function L(E){E=n.evalOption(E);for(let P in r){const y=r[P];if(E.indexOf(P)>=0)return y}}const C=function(E){const P=E.shift(),y=E.pop(),f=n.extractOptions(E);return[P,f,y]};function N(E){let[P,y,f]=C(E);return y=n.options(y,{selector:P,isDefault:up.framework.evaling,priority:0,batch:!1,jQuery:!1}),n.assign(f,y)}function q(E,P){up.framework.booted&&up.puts("up.compiler()","Compiler %s was registered after booting Unpoly. Compiler will run for future fragments.",P.selector);let y,f=0;for(;(y=E[f])&&y.priority>=P.priority;)f+=1;return E.splice(f,0,P),P}function I(E,P){const y=t.concat(e);new up.CompilerPass(E,y,P).run()}function _(E,P){let y=E.upDestructors;y||(y=[],E.upDestructors=y,E.classList.add("up-can-clean")),n.isArray(P)?y.push(...P):y.push(P)}function V(E,P={}){new up.DestructorPass(E,P).run()}function X(E){return E=up.fragment.get(E),o.jsonAttr(E,"up-data")||{}}function Q(){e=n.filter(e,"isDefault"),t=n.filter(t,"isDefault")}return up.on("up:framework:reset",Q),{compiler:s,macro:l,$compiler:a,$macro:w,destructor:_,compile:I,clean:V,data:X}}(),up.compiler=up.syntax.compiler,up.$compiler=up.syntax.$compiler,up.destructor=up.syntax.destructor,up.macro=up.syntax.macro,up.$macro=up.syntax.$macro,up.data=up.syntax.data},()=>{up.history=function(){const n=up.util,o=up.element,r=new up.Config(()=>({enabled:!0,restoreTargets:["body"]}));let e,t;function s(){r.reset(),e=void 0,t=void 0,L()}const a={hash:!0};function l(y,f){return f=n.merge(a,f),n.normalizeURL(y,f)}function w(y){return l(location.href,y)}function L(){const y=w();t!==y&&(e=t,t=y)}L();const C={trailingSlash:!1};function N(y,f){return f=n.merge(C,f),l(y,f)===w(f)}function q(y,f={}){y=l(y),_("replaceState",y)&&f.event!==!1&&E("up:location:changed",{url:y,reason:"replace",log:`Replaced state for ${y}`})}function I(y){y=l(y),!N(y)&&_("pushState",y)&&up.emit("up:location:changed",{url:y,reason:"push",log:`Advanced to location ${y}`})}function _(y,f){if(r.enabled){const O=V();return window.history[y](O,"",f),L(),!0}}function V(){return{up:{}}}async function X(y){if(y!=null&&y.up){let f=w();await up.render({url:f,history:!0,location:f,peel:!0,layer:"root",target:r.restoreTargets,cache:!0,scroll:"restore",saveScroll:!1}),f=w(),E("up:location:changed",{url:f,reason:"pop",log:`Restored location ${f}`})}else up.puts("pop","Ignoring a state not pushed by Unpoly (%o)",y)}function Q(y){L(),up.viewport.saveScroll({location:e});const{state:f}=y;X(f)}function E(...y){return n.find(up.layer.stack.reversed(),"history").emit(...y)}function P(){window.addEventListener("popstate",Q),up.protocol.initialRequestMethod()==="GET"&&q(w(),{event:!1})}return up.on("up:framework:boot",function(){"jasmine"in window?P():setTimeout(P,100)}),up.macro("a[up-back], [up-href][up-back]",function(y){e&&(o.setMissingAttrs(y,{"up-href":e,"up-scroll":"restore"}),y.removeAttribute("up-back"),up.link.makeFollowable(y))}),up.on("up:framework:reset",s),{config:r,push:I,replace:q,get location(){return w()},get previousLocation(){return e},normalizeURL:l,isLocation:N}}()},(n,o,r)=>{r(79);const e=up.util,t=up.element;up.fragment=function(){const s=new up.Config(()=>({badTargetClasses:[/^up-/],navigateOptions:{solo:!0,feedback:!0,cache:"auto",fallback:!0,focus:"auto",scroll:"auto",history:"auto",peel:!0},matchAroundOrigin:!0,runScripts:!1,autoHistoryTargets:[":main"],autoFocus:["hash","autofocus","main-if-main","target-if-lost"],autoScroll:["hash","layer-if-main"]}));e.delegate(s,"mainTargets",()=>up.layer.config.any);function a(){s.reset()}function l(v,c={}){return v=f(v,c),t.closestAttr(v,"up-source")}function w(v){return t.closestAttr(v,"up-time")||"0"}const L=up.mockable((...v)=>e.asyncify(function(){let c=B(v);c=up.RenderOptions.preprocess(c),up.browser.assertConfirmed(c);let b=e.pluckKey(c,"guardEvent");return b&&(b.renderOptions=c,up.event.assertEmitted(b,{target:c.origin})),up.RenderOptions.assertContentGiven(c),(c.url?C:N)(c)}));function C(v){let c=()=>new up.Change.FromURL(v).execute();return up.feedback.aroundForOptions(v,c)}function N(v){return up.network.mimicLocalRequest(v),new up.Change.FromContent(v).execute()}const q=up.mockable((...v)=>{const c=B(v);return L({...c,navigate:!0})});function I(v,c={}){v=f(v);const j=(c.keepPlans||[]).map(function(Y){return X(Y),Y.oldElement});return up.syntax.compile(v,{skip:j,layer:c.layer}),_(v,c),v}function _(v,c){return up.emit(v,"up:fragment:inserted",{log:["Inserted fragment %o",v],origin:c.origin})}function V(v){const c=["Keeping fragment %o",v.oldElement],b=t.callbackAttr(v.oldElement,"up-on-keep",["newFragment","newData"]);return Q(v,"up:fragment:keep",{log:c,callback:b})}function X(v){const c=["Kept fragment %o",v.oldElement];return Q(v,"up:fragment:kept",{log:c})}function Q(v,c,b){const j=v.oldElement,Y=up.event.build(c,{newFragment:v.newElement,newData:v.newData});return up.emit(j,Y,b)}function E(v,c){var Y;const b=(Y=c.log)!=null?Y:["Destroyed fragment %o",v],j=c.parent||document;return up.emit(j,"up:fragment:destroyed",{fragment:v,parent:j,log:b})}function P(v){return!!t.closest(v,".up-destroying")}const y=e.negate(P);function f(...v){const c=e.extractOptions(v),b=v.pop(),j=v[0];return e.isElementish(b)?t.get(b):j?O(j,b,c):new up.FragmentFinder({selector:b,origin:c.origin,layer:c.layer}).find()}function O(...v){return J(...v)[0]}const D=/:has\(([^)]+)\)$/;function J(...v){const c=e.extractOptions(v);let b=v.pop();const j=v[0];return b=F(b,j,c),b.descendants(j||document)}function T(v,c,b={}){return c=F(c,v,b),c.subtree(v)}function K(v,c){return T(v,c).length>0}function re(v,c,b){return v=t.get(v),c=F(c,v,b),c.closest(v)}function S(...v){var b,j;const c=B(v);return(c.element=f(c.target,c))&&new up.Change.DestroyFragment(c).execute(),(j=(b=up.migrate).formerlyAsync)==null?void 0:j.call(b,"up.destroy()")}function B(v){const c=e.parseArgIntoOptions(v,"target");return e.isElement(c.target)&&(c.origin||(c.origin=c.target)),c}function d(v){v.classList.add("up-destroying"),v.setAttribute("aria-hidden","true")}function m(...v){const c=B(v);c.target||(c.target=":main");const b=f(c.target,c);return c.url||(c.url=l(b)),c.headers||(c.headers={}),c.headers[up.protocol.headerize("reloadFromTime")]=w(b),L(c)}function U(v,c){return q({...c,url:v})}function W(v){return e.unprefixCamelCase(v,"fail")}function ee(v){if(!v.match(/^fail[A-Z]/))return e.prefixCamelCase(v,"fail")}function te(v){if(e.isString(v))return v;v=t.get(v);let c;if(t.isSingleton(v))return t.tagName(v);if(c=v.getAttribute("up-id"))return t.attributeSelector("up-id",c);if(c=v.getAttribute("id"))return t.idSelector(c);if(c=v.getAttribute("name"))return t.tagName(v)+t.attributeSelector("name",c);if(c=e.presence(e.filter(v.classList,oe))){let b="";for(let j of c)b+=t.classSelector(j);return b}else return t.tagName(v)}function oe(v){function c(b){return e.isRegExp(b)?b.test(v):b===v}return!e.some(s.badTargetClasses,c)}function x(v,c={}){const{origin:b}=c;return v.replace(/&|:origin\b/,function(j){if(b)return te(b);up.fail('Missing { origin } element to resolve "%s" reference (found in %s)',j,v)})}function M(v,c={}){const{layer:b}=c;b!=="new"&&!(b instanceof up.Layer)&&up.fail("Must pass an up.Layer as { layer } option, but got %o",b),v=e.copy(e.wrapList(v));const j=[];for(;v.length;){const Y=v.shift();if(Y===":main"||Y===!0){const ne=b==="new"?c.mode:b.mode;v.unshift(...up.layer.mainTargets(ne))}else Y===":layer"?b!=="new"&&!b.opening&&v.unshift(b.getFirstSwappableElement()):e.isElementish(Y)?j.push(te(Y)):e.isString(Y)&&j.push(x(Y,c))}return e.uniq(j)}function F(v,c,b={}){const j=[];b.destroying||j.push(y),b.layer||(b.layer=c);const Y=up.layer.getAll(b);b.layer!=="any"&&!(c&&t.isDetached(c))&&j.push(ce=>e.some(Y,pe=>pe.contains(ce)));let ne=up.fragment.expandTargets(v,{...b,layer:Y[0]});return ne=ne.map(function(ce){return ce=ce.replace(D,function(pe,he){return j.push(de=>de.querySelector(he)),""}),ce||"*"}),new up.Selector(ne,j)}function ie(v){return K(v,s.autoHistoryTargets)?!0:(up.puts("up.render()","Will not auto-update history because fragment doesn't contain a selector from up.fragment.config.autoHistoryTargets"),!1)}function le(v,c,b={}){return v=t.get(v),c=F(c,v,b),c.matches(v)}return up.on("up:framework:boot",function(){const{body:v}=document;if(v.setAttribute("up-source",e.normalizeURL(location.href,{hash:!1})),I(v),!up.browser.canPushState())return up.warn("Cannot push history changes. Next fragment update will load in a new page.")}),up.on("up:framework:reset",a),{config:s,reload:m,destroy:S,render:L,navigate:q,get:f,getDumb:O,all:J,subtree:T,contains:K,closest:re,source:l,hello:I,visit:U,markAsDestroying:d,emitInserted:_,emitDestroyed:E,emitKeep:V,emitKept:X,successKey:W,failKey:ee,expandTargets:M,toTarget:te,matches:le,hasAutoHistory:ie}}(),up.reload=up.fragment.reload,up.destroy=up.fragment.destroy,up.render=up.fragment.render,up.navigate=up.fragment.navigate,up.hello=up.fragment.hello,up.visit=up.fragment.visit,e.delegate(up,"context",()=>up.layer.current)},(n,o,r)=>{r.r(o)},(n,o,r)=>{r(81),up.viewport=function(){const e=up.util,t=up.element,s=up.fragment,a=new up.Config(()=>({viewportSelectors:["[up-viewport]","[up-fixed]"],fixedTop:["[up-fixed~=top]"],fixedBottom:["[up-fixed~=bottom]"],anchoredRight:["[up-anchored~=right]","[up-fixed~=top]","[up-fixed~=bottom]","[up-fixed~=right]"],revealSnap:200,revealPadding:0,revealTop:!1,revealMax(){return .5*window.innerHeight},scrollSpeed:1})),l=new up.MotionController("scrolling");function w(){a.reset(),l.reset()}function L(c,b,j={}){c=s.get(c,j);const Y=new up.ScrollMotion(c,b,j);l.startMotion(c,Y,j)}function C(){const c=a.anchoredRight.join(",");return s.all(c,{layer:"root"})}function N(c,b){if(b=e.options(b),c=s.get(c,b),!(b.layer=up.layer.get(c)))return up.error.failed.async("Cannot reveal a detached element");b.peel&&b.layer.peel();const j=new up.RevealMotion(c,b);return l.startMotion(c,j,b)}function q(c,b={}){if(up.browser.isIE11()){const j=E(c),Y=j.scrollTop;c.focus(),j.scrollTop=Y}else c.focus({preventScroll:!0});if(!b.preventScroll)return N(c)}function I(c,b){return q(c,b),c===document.activeElement}function _(c){return t.matches(c,"a[href], button, textarea, input, select")}function V(c){!c.hasAttribute("tabindex")&&!_(c)&&(c.setAttribute("tabindex","-1"),c.classList.add("up-focusable-content"))}function X(c=location.hash,b){let j=ie(c,b);if(j)return up.reveal(j,{top:!0})}function Q(){return[O(),...a.viewportSelectors].join(",")}function E(c,b={}){const j=s.get(c,b);return t.closest(j,Q())}function P(c,b={}){return c=s.get(c,b),t.subtree(c,Q())}function y(c,b={}){return c=s.get(c,b),t.around(c,Q())}function f(c={}){return s.all(Q(),c)}function O(){let c;return(c=document.scrollingElement)?c.tagName:"html"}function D(){return document.querySelector(O())}function J(){return t.root.clientWidth}function T(){return t.root.clientHeight}function K(c){return t.matches(c,O())}function re(){return window.innerWidth>document.documentElement.offsetWidth}function S(){const{body:c}=document,b=document.documentElement;return e.find([b,c],B)||D()}function B(c){const b=t.style(c,"overflow-y");return b==="auto"||b==="scroll"}const d=e.memoize(function(){const c={position:"absolute",top:"0",left:"0",width:"100px",height:"100px",overflowY:"scroll"},b=up.element.affix(document.body,"[up-viewport]",{style:c}),j=b.offsetWidth-b.clientWidth;return up.element.remove(b),j});function m(c){return up.fragment.toTarget(c)}function U(c=document){const b=["[up-fixed]"].concat(a.fixedTop).concat(a.fixedBottom);return c.querySelectorAll(b.join(","))}function W(...c){var ne;const[b,j]=oe(c),Y=j.location||j.layer.location;if(Y){const ce=(ne=j.tops)!=null?ne:ee(b);j.layer.lastScrollTops.set(Y,ce)}}function ee(c){return e.mapObject(c,b=>[m(b),b.scrollTop])}function te(...c){const[b,j]=oe(c),Y=j.layer.location,ne=j.layer.lastScrollTops.get(Y)||{};return up.puts("up.viewport.restoreScroll()","Restoring scroll positions for URL %s to %o",Y,ne),M(b,ne)}function oe(c){const b=e.copy(e.extractOptions(c));b.layer=up.layer.get(b);let j;return c[0]?j=[E(c[0],b)]:b.around?j=y(b.around,b):j=f(b),[j,b]}function x(...c){const[b,j]=oe(c);return M(b,{})}function M(c,b){const j=e.map(c,function(Y){const ne=m(Y),ce=b[ne]||0;return L(Y,ce,{duration:0})});return Promise.all(j)}function F(c,b={}){var we;const Y=E(c).getBoundingClientRect(),ne=c.getBoundingClientRect(),ce=new up.Rect({left:ne.left-Y.left,top:ne.top-Y.top,width:ne.width,height:ne.height});(we=b.afterMeasure)==null||we.call(b),t.setStyle(c,{position:c.style.position==="static"?"static":"relative",top:"auto",right:"auto",bottom:"auto",left:"auto",width:"100%",height:"100%"});const pe=t.createFromSelector("up-bounds");t.insertBefore(c,pe),pe.appendChild(c);const he=function(Ae,Ce){return ce.left+=Ae,ce.top+=Ce,t.setStyle(pe,ce)};he(0,0);const de=c.getBoundingClientRect();return he(ne.left-de.left,ne.top-de.top),e.each(U(c),t.fixedToAbsolute),{bounds:pe,moveBounds:he}}function ie(c,b={}){if(c=le(c)){const j=[t.attributeSelector("id",c),"a"+t.attributeSelector("name",c)].join(",");return s.get(j,b)}}function le(c){return c==null?void 0:c.replace(/^#/,"")}let v=!1;return up.on("scroll",{once:!0,beforeBoot:!0},()=>v=!0),up.on("up:framework:boot",function(){e.task(function(){if(!v)return X()})}),up.on(window,"hashchange",()=>X()),up.on("up:framework:reset",w),{reveal:N,revealHash:X,firstHashTarget:ie,scroll:L,config:a,get:E,subtree:P,around:y,all:f,rootSelector:O,get root(){return D()},rootWidth:J,rootHeight:T,rootHasReducedWidthFromScrollbar:re,rootOverflowElement:S,isRoot:K,scrollbarWidth:d,saveScroll:W,restoreScroll:te,resetScroll:x,anchoredRight:C,absolutize:F,focus:q,tryFocus:I,makeFocusable:V}}(),up.focus=up.viewport.focus,up.scroll=up.viewport.scroll,up.reveal=up.viewport.reveal},(n,o,r)=>{r.r(o)},()=>{up.motion=function(){const n=up.util,o=up.element;let r={},e={};const t=new up.MotionController("motion"),s=new up.Config(()=>({duration:175,easing:"ease",enabled:!matchMedia("(prefers-reduced-motion: reduce)").matches}));function a(S){return n.pickBy(S,B=>B.isDefault)}function l(){t.reset(),r=a(r),e=a(e),s.reset()}function w(){return s.enabled}function L(S,B,d){S=up.fragment.get(S),d=n.options(d);const m=P(B);if(C(S,B,d)){const W=()=>m(S,d);return t.startFunction(S,W,d)}else return N(S,B)}function C(S,B,d){return I(d),w()&&!D(B)&&d.duration>0&&!o.isSingleton(S)}function N(S,B){return n.isOptions(B)&&o.setStyle(S,B),Promise.resolve()}function q(S,B,d){return d={...d,finishEvent:t.finishEvent},new up.CSSTransition(S,B,d).start()}function I(S){S.easing||(S.easing=s.easing),S.duration||(S.duration=s.duration)}function _(S){return r[S]||up.fail("Unknown animation %o",S)}function V(S){return t.finish(S)}function X(S,B,d,m){m=n.options(m),I(m),S=up.fragment.get(S),B=up.fragment.get(B);const U=Q(d),W=C(S,U,m),ee=n.pluckKey(m,"beforeStart")||n.noop,te=n.pluckKey(m,"afterInsert")||n.noop,oe=n.pluckKey(m,"beforeDetach")||n.noop,x=n.pluckKey(m,"afterDetach")||n.noop,M=n.pluckKey(m,"scrollNew")||n.asyncNoop;if(ee(),W){if(t.isActive(S)&&m.trackMotion===!1)return U(S,B,m);up.puts("up.morph()","Morphing %o to %o with transition %O",S,B,d);const F=up.viewport.get(S),ie=F.scrollTop,le=up.viewport.absolutize(S,{afterMeasure(){o.insertBefore(S,B),te()}}),v=async function(){await M();const c=F.scrollTop;le.moveBounds(0,c-ie),await U(S,B,m),oe(),o.remove(le.bounds),x()};return t.startFunction([S,B],v,m)}else return oe(),y(S,B),te(),x(),M()}function Q(S){if(!D(S)){if(n.isFunction(S))return S;if(n.isArray(S))return E(...S);if(n.isString(S)){let B;if(S.indexOf("/")>=0)return E(...S.split("/"));if(B=e[S])return Q(B)}else return up.fail("Unknown transition %o",S)}}function E(S,B){if(!D(S)&&!D(B)){const d=P(S)||n.asyncNoop,m=P(B)||n.asyncNoop;return(U,W,ee)=>Promise.all([d(U,ee),m(W,ee)])}}function P(S){if(!D(S))return n.isFunction(S)?S:n.isString(S)?_(S):n.isOptions(S)?(B,d)=>q(B,S,d):up.fail("Unknown animation %o",S)}const y=up.mockable(function(S,B){o.replace(S,B)});function f(S,B){const d=Q(B);d.isDefault=up.framework.evaling,e[S]=d}function O(S,B){const d=P(B);d.isDefault=up.framework.evaling,r[S]=d}up.on("up:framework:boot",function(){w()||up.puts("up.motion","Animations are disabled")});function D(S){return!S||S==="none"}function J(S,B,d){O(S,function(m,U){return m.style.opacity=0,o.setStyle(m,{opacity:B}),q(m,{opacity:d},U)})}J("fade-in",0,1),J("fade-out",1,0);function T(S,B){return{transform:`translate(${S}px, ${B}px)`}}function K(S){return o.setStyle(S,T(0,0)),S.getBoundingClientRect()}function re(S,B){const d=`move-to-${S}`,m=`move-from-${S}`;O(d,function(U,W){const ee=K(U),te=B(ee);return q(U,te,W)}),O(m,function(U,W){const ee=K(U),te=B(ee);return o.setStyle(U,te),q(U,T(0,0),W)})}return re("top",function(S){const B=S.top+S.height;return T(0,-B)}),re("bottom",function(S){const B=up.viewport.rootHeight()-S.top;return T(0,B)}),re("left",function(S){const B=S.left+S.width;return T(-B,0)}),re("right",function(S){const B=up.viewport.rootWidth()-S.left;return T(B,0)}),f("cross-fade",["fade-out","fade-in"]),f("move-left",["move-to-left","move-from-right"]),f("move-right",["move-to-right","move-from-left"]),f("move-up",["move-to-top","move-from-bottom"]),f("move-down",["move-to-bottom","move-from-top"]),up.on("up:framework:reset",l),{morph:X,animate:L,finish:V,finishCount(){return t.finishCount},transition:f,animation:O,config:s,isEnabled:w,isNone:D,willAnimate:C,swapElementsDirectly:y}}(),up.transition=up.motion.transition,up.animation=up.motion.animation,up.morph=up.motion.morph,up.animate=up.motion.animate},(n,o,r)=>{r(84);const e=up.util;up.network=function(){const t=new up.Config(()=>({concurrency:4,wrapMethod:!0,cacheSize:70,cacheExpiry:3e5,badDownlink:.6,badRTT:750,badResponseTime:400,autoCache(T){return T.isSafe()},clearCache(T,K){return!T.isSafe()},requestMetaKeys:["target","failTarget","mode","failMode","context","failContext"],progressBar:!0})),s=new up.Request.Queue,a=new up.Request.Cache;let l=null;function w(){y(),s.reset(),t.reset(),a.clear(),l==null||l.destroy(),l=null}function L(...T){const K=new up.Request(q(T));return I(K)||_(K),N(K),K}function C(T){N(T);let K=T.clearCache;K&&a.clear(K)}function N(T){let K=T.solo;K&&X()&&(up.puts("up.request()","Change with { solo } option will abort other requests"),T instanceof up.Request?s.abortExcept(T,K):y(K))}function q(T){var re,S;const K=e.extractOptions(T);return K.url||(K.url=T[0]),(S=(re=up.migrate).handleRequestOptions)==null||S.call(re,K),K}function I(T){let K;if(T.willCache()&&(K=a.get(T)))return up.puts("up.request()","Re-using previous request to %s %s",T.method,T.url),T.preload||s.promoteToForeground(K),T.followState(K),!0}function _(T){return T.preload&&!T.isSafe()&&up.fail("Will not preload request to %s",T.description),V(T),s.asap(T),!0}function V(T){return T.willCache()&&a.set(T,T),e.always(T,function(K){var S,B;let re=(B=(S=K.clearCache)!=null?S:T.clearCache)!=null?B:t.clearCache(T,K);re&&a.clear(re),(T.willCache()||a.get(T))&&a.set(T,T),K.ok||a.remove(T)})}function X(){return s.isBusy()}const Q=e.negate(X);function E(T){new up.Request(T).loadPage()}function P(){let T=navigator.connection;if(T)return T.saveData||T.rtt&&T.rtt>t.badRTT||T.downlink&&T.downlink<t.badDownlink}function y(...T){s.abort(...T)}function f(T,K){if(T.cache&&K.url&&T.url!==K.url){const re=T.variant({method:K.method,url:K.url});a.alias(T,re)}}function O(T){return e.contains(["GET","OPTIONS","HEAD"],e.normalizeMethod(T))}function D(){e.evalOption(t.progressBar)&&(l=new up.ProgressBar)}function J(){l==null||l.conclude()}return up.on("up:request:late",D),up.on("up:request:recover",J),up.on("up:framework:reset",w),{request:L,cache:a,isIdle:Q,isBusy:X,isSafeMethod:O,config:t,abort:y,registerAliasForRedirect:f,queue:s,shouldReduceRequests:P,mimicLocalRequest:C,loadPage:E}}(),up.request=up.network.request,up.cache=up.network.cache},(n,o,r)=>{r.r(o)},(n,o,r)=>{r(86);const e=up.util,t=up.element;up.layer=function(){const s=[up.Layer.Root,up.Layer.Modal,up.Layer.Popup,up.Layer.Drawer,up.Layer.Cover],a=new up.Config(function(){const f={mode:"modal",any:{mainTargets:["[up-main='']","main",":layer"]},root:{mainTargets:["[up-main~=root]"],history:!0},overlay:{mainTargets:["[up-main~=overlay]"],openAnimation:"fade-in",closeAnimation:"fade-out",dismissLabel:"\xD7",dismissAriaLabel:"Dismiss dialog",dismissable:!0,history:"auto"},cover:{mainTargets:["[up-main~=cover]"]},drawer:{mainTargets:["[up-main~=drawer]"],backdrop:!0,position:"left",size:"medium",openAnimation(O){switch(O.position){case"left":return"move-from-left";case"right":return"move-from-right"}},closeAnimation(O){switch(O.position){case"left":return"move-to-left";case"right":return"move-to-right"}}},modal:{mainTargets:["[up-main~=modal]"],backdrop:!0,size:"medium"},popup:{mainTargets:["[up-main~=popup]"],position:"bottom",size:"medium",align:"left",dismissable:"outside key"}};for(let O of s)f[O.mode].Class=O;return f});let l=null,w=[];function L(f){return e.flatMap(C(f),"mainTargets")}function C(f){return f==="root"?[a.root,a.any]:[a[f],a.overlay,a.any]}function N(f){var O,D;if((D=(O=up.migrate).handleLayerOptions)==null||D.call(O,f),e.isGiven(f.layer)){let J=String(f.layer).match(/^(new|shatter|swap)( (\w+))?/);if(J){f.layer="new";const T=J[1],K=J[3];f.mode||(f.mode=K||a.mode),T==="swap"?up.layer.isOverlay()&&(f.baseLayer="parent"):T==="shatter"&&(f.baseLayer="root")}}else f.mode?f.layer="new":e.isElementish(f.target)?f.layer=l.get(f.target,{normalizeLayerOptions:!1}):f.origin?f.layer="origin":f.layer="current";f.context||(f.context={}),f.baseLayer=l.get("current",{...f,normalizeLayerOptions:!1})}function q(f,O){const{mode:D}=f,{Class:J}=a[D],T=e.reverse(C(D));let K=up.migrate.handleLayerConfig;return K&&T.forEach(K),f=e.mergeDefined(...T,{mode:D,stack:l},f),O&&(f=O(f)),new J(f)}function I(f,O){return t.callbackAttr(f,O,["layer"])}function _(f,O){return t.callbackAttr(f,O,["layer","value"])}function V(){a.reset(),l.reset(),w=e.filter(w,"isDefault")}async function X(f){return f=e.options(f,{layer:"new",defaultToEmptyContent:!0,navigate:!0}),(await up.render(f)).layer}function Q(f){return new Promise(function(O,D){f={...f,onAccepted:J=>O(J.value),onDismissed:J=>D(J.value)},X(f)})}function E(){return e.map(s,f=>f.selector()).join(",")}function P(f){return e.isString(f)?`layer "${f}"`:f.toString()}up.on("up:fragment:destroyed",function(){l.sync()}),up.on("up:framework:evaled",function(){l=new up.LayerStack}),up.on("up:framework:reset",V);const y={config:a,mainTargets:L,open:X,build:q,ask:Q,normalizeOptions:N,openCallbackAttr:I,closeCallbackAttr:_,anySelector:E,optionToString:P,get stack(){return l}};return e.delegate(y,["get","getAll","root","overlays","current","front","sync","count","dismissOverlays"],()=>l),e.delegate(y,["accept","dismiss","isRoot","isOverlay","isFront","on","off","emit","parent","history","location","mode","context","element","contains","size","affix"],()=>l.current),y}()},(n,o,r)=>{r.r(o)},(n,o,r)=>{r(88),up.link=function(){const e=up.util,t=up.element,s=new up.LinkPreloader;let a=null;const l=["a[up-content]","a[up-fragment]","a[up-document]"],w=["a[href]","[up-href]"],L=["[up-follow]","[up-target]","[up-layer]","[up-transition]","[up-preload]","[up-instant]"];function C(x,M){return e.flatMap(x,F=>M.map(ie=>F+ie))}const N=new up.Config(()=>({followSelectors:C(w,L).concat(l),noFollowSelectors:["[up-follow=false]","a[download]","a[target]",'a[href^="#"]:not([up-content]):not([up-fragment]):not([up-document])','a[href^="javascript:"]'],instantSelectors:["[up-instant]"],noInstantSelectors:["[up-instant=false]","[onclick]"],preloadSelectors:C(w,["[up-preload]"]),noPreloadSelectors:["[up-preload=false]"],clickableSelectors:l.concat(["[up-emit]","[up-accept]","[up-dismiss]","[up-clickable]"]),preloadDelay:90,preloadEnabled:"auto"}));function q(){return N.followSelectors.join(",")}function I(){return N.preloadSelectors.join(",")}function _(){return N.instantSelectors.join(",")}function V(){return N.clickableSelectors.join(",")}function X(x){return t.matches(x,N.noFollowSelectors.join(","))||e.isCrossOrigin(x)}function Q(x){return!up.browser.canPushState()||t.matches(x,N.noPreloadSelectors.join(","))||X(x)||!E(x)}function E(x){const M=O(x);if(M.url)return M.cache==null&&(M.cache="auto"),M.basic=!0,new up.Request(M).willCache()}function P(x){return t.matches(x,N.noInstantSelectors.join(","))||X(x)}function y(){a=null,N.reset(),s.reset()}const f=up.mockable(function(x,M){return up.render(D(x,M))});function O(x,M){M=e.options(M);const F=new up.OptionsParser(M,x);return M.url=re(x,M),M.method=K(x,M),F.json("headers"),F.json("params"),F.booleanOrString("cache"),F.booleanOrString("clearCache"),F.booleanOrString("solo"),F.string("contentType",{attr:["enctype","up-content-type"]}),M}function D(x,M){var ie,le;x=up.fragment.get(x),M=O(x,M);const F=new up.OptionsParser(M,x,{fail:!0});return F.boolean("feedback"),F.boolean("fail"),F.options.origin==null&&(F.options.origin=x),F.boolean("navigate",{default:!0}),F.string("confirm"),F.string("target"),F.booleanOrString("fallback"),F.parse((v,c)=>t.callbackAttr(v,c,["request","response","renderOptions"]),"onLoaded"),F.string("content"),F.string("fragment"),F.string("document"),F.boolean("peel"),F.string("layer"),F.string("baseLayer"),F.json("context"),F.string("mode"),F.string("align"),F.string("position"),F.string("class"),F.string("size"),F.booleanOrString("dismissable"),F.parse(up.layer.openCallbackAttr,"onOpened"),F.parse(up.layer.closeCallbackAttr,"onAccepted"),F.parse(up.layer.closeCallbackAttr,"onDismissed"),F.string("acceptEvent"),F.string("dismissEvent"),F.string("acceptLocation"),F.string("dismissLocation"),F.booleanOrString("history"),F.booleanOrString("focus"),F.boolean("saveScroll"),F.booleanOrString("scroll"),F.boolean("revealTop"),F.number("revealMax"),F.number("revealPadding"),F.number("revealSnap"),F.string("scrollBehavior"),F.booleanOrString("history"),F.booleanOrString("location"),F.booleanOrString("title"),F.booleanOrString("animation"),F.booleanOrString("transition"),F.string("easing"),F.number("duration"),(le=(ie=up.migrate).parseFollowOptions)==null||le.call(ie,F),M.guardEvent||(M.guardEvent=up.event.build("up:link:follow",{log:"Following link"})),M}function J(x,M){if(x=up.fragment.get(x),!T())return up.error.failed.async("Link preloading is disabled");const F=up.event.build("up:link:preload",{log:["Preloading link %o",x]});return f(x,{...M,guardEvent:F,preload:!0})}function T(){const x=N.preloadEnabled;return x==="auto"?!up.network.shouldReduceRequests():x}function K(x,M={}){return e.normalizeMethod(M.method||x.getAttribute("up-method")||x.getAttribute("data-method"))}function re(x,M={}){const F=M.url||x.getAttribute("up-href")||x.getAttribute("href");if(F!=="#")return F}function S(x){return x=up.fragment.get(x),t.matches(x,q())&&!X(x)}function B(x){S(x)||x.setAttribute("up-follow","")}function d(x){t.matches(x,"a[href], button")||(t.setMissingAttrs(x,{tabindex:"0",role:"link","up-clickable":""}),x.addEventListener("keydown",function(M){if(M.key==="Enter"||M.key==="Space")return te(M)}))}up.macro(V,d);function m(x,M){if(x.defaultPrevented||X(M))return!1;const F=`a, [up-href], ${up.form.fieldSelector()}`,ie=t.closest(x.target,F);return!ie||ie===M}function U(x){const M=t.closest(x,_());return M&&!P(M)}function W(x){x.on("click",function(M,F){if(!!up.event.isUnmodified(M))return U(F)&&a?up.event.halt(M):x.wasHitByMouseEvent(M)&&!ee(M)&&te(M),a=null}),x.on("mousedown",function(M,F){!up.event.isUnmodified(M)||(a=M.target,U(F)&&te(M))})}function ee(x){return a&&a!==x.target}function te(x){let M=["clientX","clientY","button",...up.event.keyModifiers];const F=up.event.fork(x,"up:click",M);up.emit(x.target,F,{log:!1})}function oe(x){const M=K(x);return up.network.isSafeMethod(M)}return up.on("up:click",q,function(x,M){m(x,M)&&(up.event.halt(x),up.log.muteUncriticalRejection(f(M)))}),up.macro("[up-expand]",function(x){const M=x.getAttribute("up-expand")||"a, [up-href]";let F=t.get(x,M);if(F){const ie=t.upAttrs(F);ie["up-href"]||(ie["up-href"]=F.getAttribute("href")),t.setMissingAttrs(x,ie),B(x)}}),up.compiler(I,function(x){Q(x)||s.observeLink(x)}),up.on("up:framework:reset",y),{follow:f,followOptions:D,preload:J,makeFollowable:B,makeClickable:d,isSafe:oe,isFollowable:S,shouldFollowEvent:m,followMethod:K,convertClicks:W,config:N,combineFollowableSelectors:C}}(),up.follow=up.link.follow},(n,o,r)=>{r.r(o)},()=>{up.form=function(){const n=up.util,o=up.element,r=["[up-submit]","[up-target]","[up-layer]","[up-transition]"],e=new up.Config(()=>({validateTargets:["[up-fieldset]:has(:origin)","fieldset:has(:origin)","label:has(:origin)","form:has(:origin)"],fieldSelectors:["select","input:not([type=submit]):not([type=image])","button[type]:not([type=submit])","textarea"],submitSelectors:up.link.combineFollowableSelectors(["form"],r),noSubmitSelectors:["[up-submit=false]","[target]"],submitButtonSelectors:["input[type=submit]","input[type=image]","button[type=submit]","button:not([type])"],observeDelay:0}));let t;function s(){return e.submitSelectors.join(",")}function a(){e.reset()}function l(d=""){return e.fieldSelectors.map(m=>m+d).join(",")}function w(d){d=o.get(d);let m=o.subtree(d,l());if(o.matches(d,"form[id]")){const U=l(o.attributeSelector("form",d.getAttribute("id"))),W=o.all(U);m.push(...W),m=n.uniq(m)}return m}function L(d){const m=C(),U=document.activeElement;return U&&o.matches(U,m)&&d.contains(U)?U:o.get(d,m)}function C(){return e.submitButtonSelectors.join(",")}const N=up.mockable((d,m)=>up.render(q(d,m)));function q(d,m){return d=J(d),m=I(d,m),new up.OptionsParser(m,d).string("failTarget",{default:up.fragment.toTarget(d)}),m.guardEvent||(m.guardEvent=up.event.build("up:form:submit",{submitButton:m.submitButton,params:m.params,log:"Submitting form"})),n.assign(m,up.link.followOptions(d,m)),m}function I(d,m){m=n.options(m),d=J(d);const U=new up.OptionsParser(m,d),W=up.Params.fromForm(d);return m.submitButton||(m.submitButton=L(d)),m.submitButton&&(W.addField(m.submitButton),m.method||(m.method=m.submitButton.getAttribute("formmethod")),m.url||(m.url=m.submitButton.getAttribute("formaction"))),W.addAll(m.params),m.params=W,U.string("url",{attr:"action",default:up.fragment.source(d)}),U.string("method",{attr:["up-method","data-method","method"],default:"GET",normalize:n.normalizeMethod}),m.method==="GET"&&(m.url=up.Params.stripURL(m.url)),m}up.on("up:click",C,function(d,m){const U=J(m);U&&S(U)&&m.focus()});function _(d,...m){var x,M;d=o.list(d);const U=n.flatMap(d,w),W=n.reject(U,"name");W.length&&up.warn("up.observe()","Will not observe fields without a [name]: %o",W);const ee=n.extractCallback(m)||V(d[0])||up.fail("up.observe: No change callback given"),te=n.extractOptions(m);te.delay=(M=(x=te.delay)!=null?x:o.numberAttr(d[0],"up-delay"))!=null?M:e.observeDelay;const oe=new up.FieldObserver(U,te,ee);return oe.start(),()=>oe.stop()}function V(d){let m=d.getAttribute("up-observe");if(m)return up.NonceableCallback.fromString(m).toFunction("value","name")}function X(d,m){return _(d,m,()=>N(d))}function Q(d,m){let U;const W=T(d);return n.isElementish(m.target)?up.fragment.toTarget(m.target):(U=m.target||d.getAttribute("up-validate")||W.getAttribute("up-validate"))?U:o.matches(d,"form")?up.fragment.toTarget(d):E(d,m)||up.fail("Could not find validation target for %o (tried defaults %o)",d,e.validateTargets)}function E(d,m){const U=up.layer.get(d);return n.findResult(e.validateTargets,function(W){if(up.fragment.get(W,{...m,layer:U}))return W})}function P(d,m){return d=up.fragment.get(d),m=I(d,m),m.origin=d,m.target=Q(d,m),m.focus="keep",m.fail=!1,m.headers||(m.headers={}),m.headers[up.protocol.headerize("validate")]=d.getAttribute("name")||":unknown",m.guardEvent=up.event.build("up:form:validate",{field:d,log:"Validating form"}),up.render(m)}function y(d){let m,U;if(o.matches(d,"input[type=checkbox]"))d.checked?(m=d.value,U=":checked"):U=":unchecked";else if(o.matches(d,"input[type=radio]")){const ee=T(d),te=d.getAttribute("name"),oe=ee.querySelector(`input[type=radio]${o.attributeSelector("name",te)}:checked`);oe?(U=":checked",m=oe.value):U=":unchecked"}else m=d.value;const W=[];return n.isPresent(m)?(W.push(m),W.push(":present")):W.push(":blank"),n.isPresent(U)&&W.push(U),W}function f(d,m={}){const U=m.target||m.target||d.getAttribute("up-switch"),W=T(d);U||up.fail("No switch target given for %o",d);const ee=y(d);for(let te of o.all(W,U))O(te,ee)}const O=up.mockable(function(d,m){let U;m||(m=y(D(d)));let W=d.getAttribute("up-hide-for");if(W)W=n.splitValues(W),U=n.intersect(m,W).length===0;else{let ee=d.getAttribute("up-show-for");ee=ee?n.splitValues(ee):[":present",":checked"],U=n.intersect(m,ee).length>0}o.toggle(d,U),d.classList.add("up-switched")});function D(d){const m=T(d),U=o.all(m,"[up-switch]");return n.find(U,function(ee){const te=ee.getAttribute("up-switch");return o.matches(d,te)})||up.fail("Could not find [up-switch] field for %o",d)}function J(d,m){const U=up.fragment.get(d);return U.form||o.closest(U,"form")||m&&o.closest(U,m)}function T(d){return J(d,up.layer.anySelector())}function K(d){return o.matches(d,l())}function re(){return n.presence(document.activeElement,K)}function S(d){return d=up.fragment.get(d),o.matches(d,s())&&!B(d)}function B(d){return o.matches(d,e.noSubmitSelectors.join(","))}return up.on("submit",s,function(d,m){d.defaultPrevented||B(m)||(t==null||t(),up.event.halt(d),up.log.muteUncriticalRejection(N(m)))}),up.on("change","[up-validate]",function(d){const m=w(d.target)[0];t=n.abortableMicrotask(()=>up.log.muteUncriticalRejection(P(m)))}),up.compiler("[up-switch]",d=>{f(d)}),up.on("change","[up-switch]",(d,m)=>{f(m)}),up.compiler("[up-show-for]:not(.up-switched), [up-hide-for]:not(.up-switched)",d=>{O(d)}),up.compiler("[up-observe]",d=>_(d)),up.compiler("[up-autosubmit]",d=>X(d)),up.on("up:framework:reset",a),{config:e,submit:N,submitOptions:q,isSubmittable:S,observe:_,validate:P,autosubmit:X,fieldSelector:l,fields:w,focusedField:re,switchTarget:O}}(),up.submit=up.form.submit,up.observe=up.form.observe,up.autosubmit=up.form.autosubmit,up.validate=up.form.validate},()=>{up.feedback=function(){const n=up.util,o=up.element,r=new up.Config(()=>({currentClasses:["up-current"],navSelectors:["[up-nav]","nav"]}));function e(){r.reset(),up.layer.root.feedbackLocation=null}const t="up-active",s="a, [up-href]";function a(){return r.navSelectors.join(",")}function l(y){if(y)return n.normalizeURL(y,{trailingSlash:!1,hash:!1})}function w(y){return y.upFeedbackURLs||(y.upFeedbackURLs=new up.LinkFeedbackURLs(y))}function L(y){const f={layer:up.layer.get(y)};if(up.fragment.closest(y,a(),f)){const O=up.fragment.subtree(y,s,f);q(O,f)}else C(y,f)}function C(y,f){const O=up.fragment.subtree(y,a(),f),D=n.flatMap(O,J=>o.subtree(J,s));q(D,f)}function N(y){return y.feedbackLocation||l(y.location)}function q(y,f={}){if(!y.length)return;const O=f.layer||up.layer.get(y[0]);let D=N(O);if(D)for(let J of y){const T=w(J).isCurrent(D);for(let K of r.currentClasses)o.toggleClass(J,K,T);o.toggleAttr(J,"aria-current","page",T)}}function I(y){return o.ancestor(y,s)||y}function _(y){I(y).classList.add(t)}function V(y){I(y).classList.remove(t)}function X(y,f){_(y);const O=f();return n.always(O,()=>V(y)),O}function Q(y,f){let O,D=y.feedback;return D&&(n.isBoolean(D)?O=y.origin:O=D),O?(O=up.fragment.get(O),X(O,f)):f()}function E(y){const f=y.feedbackLocation,O=N(y.location);(!f||f!==O)&&(y.feedbackLocation=O,C(y.element,{layer:y}))}function P(){const y=up.layer.front;y.showsLiveHistory()&&E(y)}return up.on("up:location:changed",y=>{P()}),up.on("up:fragment:inserted",(y,f)=>{L(f)}),up.on("up:layer:location:changed",y=>{E(y.layer)}),up.on("up:framework:reset",e),{config:r,start:_,stop:V,around:X,aroundForOptions:Q,normalizeURL:l}}()},()=>{up.radio=function(){const n=up.util,o=new up.Config(()=>({hungrySelectors:["[up-hungry]"],pollInterval:3e4,pollEnabled:"auto"}));function r(){o.reset()}function e(){return o.hungrySelectors.join(",")}function t(l,w={}){up.FragmentPolling.forFragment(l).forceStart(w)}function s(l){up.FragmentPolling.forFragment(l).forceStop()}function a(l){var L,C;const w=n.evalOption(o.pollEnabled,l);return w==="auto"?!document.hidden&&!up.network.shouldReduceRequests()&&((C=(L=up.layer.get(l))==null?void 0:L.isFront)==null?void 0:C.call(L)):w}return up.compiler("[up-poll]",l=>{up.FragmentPolling.forFragment(l).onPollAttributeObserved()}),up.on("up:framework:reset",r),{config:o,hungrySelector:e,startPolling:t,stopPolling:s,shouldPoll:a}}()},()=>{up.rails=function(){const n=up.util,o=up.element;function r(){var e;return window._rails_loaded||window.Rails||((e=window.jQuery)==null?void 0:e.rails)}return n.each(["method","confirm"],function(e){const t=`data-${e}`,s=`up-${e}`;up.macro(`a[${t}]`,function(a){if(r()&&up.link.isFollowable(a))return o.setMissingAttr(a,s,a.getAttribute(t)),a.removeAttribute(t)})})}()}],z={};function p(n){var o=z[n];if(o!==void 0)return o.exports;var r=z[n]={exports:{}};return A[n](r,r.exports,p),r.exports}p.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},p(1),p(2),p(3),p(4),p(5),p(6),p(7),p(9),p(10),p(11),p(12),p(13),p(14),p(15),p(16),p(17),p(18),p(19),p(20),p(21),p(22),p(23),p(24),p(25),p(26),p(27),p(28),p(29),p(30),p(31),p(32),p(33),p(34),p(35),p(36),p(37),p(38),p(39),p(40),p(41),p(42),p(43),p(44),p(45),p(46),p(47),p(48),p(49),p(50),p(51),p(52),p(53),p(54),p(55),p(56),p(57),p(58),p(59),p(60),p(61),p(62),p(63),p(64),p(65),p(66),p(67),p(68),p(69),p(70),p(71),p(72),p(73),p(74),p(75),p(76),p(77),p(78),p(80),p(82),p(83),p(85),p(87),p(89),p(90),p(91),p(92),up.framework.onEvaled()})()})();"serviceWorker"in window.navigator&&window.addEventListener("load",()=>{window.navigator.serviceWorker.register("/sw.js").then(A=>{A.onupdatefound=()=>{const z=A.installing;z.onstatechange=()=>{z.state==="installed"&&(navigator.serviceWorker.controller?confirm('\u064A\u062A\u0648\u0641\u0631 \u062A\u062D\u062F\u064A\u062B \u062C\u062F\u064A\u062F \u0644\u0644\u062A\u0637\u0628\u064A\u0642, \u0623\u0646\u0642\u0631 \u0641\u0648\u0642 "\u0645\u0648\u0627\u0641\u0642" \u0644\u0644\u062A\u062D\u062F\u064A\u062B')&&window.location.reload():console.log(`content is now cached for offline usage with scope: ${A.scope}`))}}})});function Te(A,...z){return z.map(p=>A.classList.toggle(p))}function st(A){return new Promise((z,p)=>{var n=document.querySelectorAll("link[href='"+A+"']").length>0;if(n)return z();var o=document.createElement("link");o.rel="stylesheet",o.href=A,o.crossOrigin="anonymous",document.head.appendChild(o),o.onload=()=>{z()}})}function Re(A,z,p=!0,n=!0){return new Promise((o,r)=>{var e=document.querySelectorAll("script[src='"+A+"']").length>0;if(e)return o();let t=document.createElement("script");const s=z||document.getElementsByTagName("script")[0];t.async=p,t.defer=n,t.crossOrigin="anonymous";function a(l,w){(w||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=null,t.onreadystatechange=null,t=void 0,w?r():o())}t.onload=a,t.onreadystatechange=a,t.src=A,s.parentNode.insertBefore(t,s)})}phoneLength={AF:8,AL:8,DZ:8,AD:6,AO:9,AG:7,AR:8,AM:8,AU:10,AT:9,AZ:9,BS:7,BH:7,BD:11,BB:7,BY:9,BE:9,BZ:7,BJ:8,BT:8,BO:8,BA:8,BW:8,BR:9,BN:7,BG:9,BF:8,MM:9,BI:8,KH:9,CM:8,CA:10,CV:7,CF:8,TD:8,CL:9,CN:11,CO:10,KM:7,CG:8,CD:9,CR:9,CI:8,HR:9,CU:8,CY:8,CZ:9,DK:8,DJ:7,DM:7,DO:8,EC:9,EG:9,SV:8,GQ:9,ER:7,EE:9,ET:9,FJ:7,FI:9,FR:10,GA:8,GM:7,GE:9,DE:10,GH:9,GR:10,GD:7,GT:8,GN:8,GW:7,GY:7,HT:8,HN:8,HU:9,IS:7,IN:10,ID:12,IR:10,IQ:7,IE:9,IL:10,IT:10,JM:10,JP:10,JO:9,KZ:10,KE:9,KI:5,KP:8,KR:9,KW:8,KG:9,LA:8,LV:8,LB:7,LS:8,LR:8,LY:8,LI:6,LT:8,LU:8,MK:8,MG:8,MW:9,MY:9,MV:7,ML:8,MT:8,MH:7,MQ:9,MR:8,MU:7,MX:10,MD:9,MC:8,MN:8,ME:8,MA:9,MZ:9,NA:8,NR:6,NP:9,NL:9,NC:8,NZ:9,NI:8,NE:8,NG:10,NO:8,OM:8,PK:9,PW:7,PA:8,PE:9,PH:10,PL:9,PT:9,PR:10,QA:8,RO:9,RU:10,RW:8,KN:7,LC:7,VC:7,WS:7,SM:8,ST:7,SA:9,SN:8,RS:8,SC:7,SL:8,SG:8,SK:9,SI:8,SB:7,SO:8,ES:9,LK:9,SD:9,SR:7,SZ:8,SE:10,CH:9,SY:9,TW:9,TJ:9,TZ:9,TH:9,TL:7,TG:8,TO:5,TT:10,TN:8,TR:10,TM:9,TV:5,UG:9,UA:9,AE:9,GB:10,US:10,UY:8,UZ:9,VU:7,VA:9,VE:10,VN:9,YE:8,ZA:10,ZM:9,ZW:9};up.on("up:form:submit",()=>{document.querySelectorAll("fieldset").forEach(A=>{A.disabled=!0}),document.querySelectorAll(".submit").forEach(A=>{A.innerHTML='<svg class="animate-spin" height="20" width="20" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'})});up.compiler(".password",A=>{up.on("click",".toggle-password",(z,p)=>{A.type==="password"?(A.type="text",p.innerHTML="\u0625\u062E\u0641\u0627\u0621"):(A.type="password",p.innerHTML="\u0625\u0638\u0647\u0627\u0631")})});up.compiler("#id_phone",A=>{st("https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/css/intlTelInput.css"),Re("https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.19/js/intlTelInput.min.js"),Re("https://code.jquery.com/jquery-3.6.3.min.js").then(()=>{var z=intlTelInput(A,{initialCountry:"auto",formatOnDisplay:!1,separateDialCode:!0,geoIpLookup:p=>{$.get("https://ipinfo.io",()=>{},"jsonp").always(n=>{var o=n&&n.country?n.country:"sa";A.setAttribute("maxlength",phoneLength[o]+1),A.setAttribute("minlength",phoneLength[o]),p(o)})},utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"});A.addEventListener("countrychange",function(){var p=z.selectedCountryData.iso2.toUpperCase();A.setAttribute("maxlength",phoneLength[p]+1),A.setAttribute("minlength",phoneLength[p])}),up.on("click","#send-confirmation",p=>{var n=document.querySelector("#id_key");const o=document.querySelector('input[name="csrfmiddlewaretoken"]').value;up.request("/account/login-with-whatsapp/",{headers:{"X-CSRFToken":o},params:{phone:z.getNumber(),key:n.value,action:"signup"},method:"POST"}).then(function(r){var e=JSON.parse(r.text),t=document.querySelector(".alerts");if(e.status=="success"||e.status=="send"){n.parentElement.classList.remove("hidden");var s=`<div class="alert bg-green-600 duration-300 ease-linear rounded-lg shadow-sm text-white transition-all"> <div class="flex px-4 py-4"> <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0" height="22" width="22" viewBox="0 0 24 24" fill="currentColor"> <path fill-rule="evenodd" d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z" clip-rule="evenodd" /> </svg> <span class="leading-relaxed pr-3 text-[15px]">${e.message}</span> </div> </div>`}else var s=`<div class="alert bg-red-600 duration-300 ease-linear rounded-lg shadow-sm text-white transition-all"> <div class="flex px-4 py-4"> <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0" height="22" width="22" viewBox="0 0 24 24" fill="currentColor"> <path fill-rule="evenodd" d="M9.401 4.504c1.155-2.001 4.043-2.001 5.197 0l7.355 12.747c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 4.504zM12 9.75a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V10.5a.75.75 0 01.75-.75zM12 18a.75.75 0 100-1.5.75.75 0 000 1.5z" clip-rule="evenodd" /> </svg> <span class="leading-relaxed pr-3 text-[15px]">${e.message}</span> </div> </div>`;if(t.innerHTML+=s,e.status=="success"){var a=document.querySelector('button[type="submit"]');a.classList.remove("hidden"),document.querySelector("#id_key").parentElement.classList.add("hidden")}})}),up.on("click","#id_submit",p=>{const n=document.getElementById("id_next");document.querySelector("#id_phone"),up.request("/api/auth/registered-phone/",{params:{phone:z.getNumber()},method:"POST"}).then(function(o){const r=JSON.parse(o.text);r.registered===!0?window.location.href="/account/login-with-whatsapp?login=true&phone="+r.phone+"&next="+n.value:window.location.href="/accounts/signup?phone="+r.phone+"&next="+n.value}).catch(function(){window.location.href="/account/login-with-whatsapp?login=true&next="+n.value})}),A.closest("form").addEventListener("submit",function(p){p.preventDefault(),A.value=z.getNumber(),this.submit()})})});up.compiler("#id_coupon",()=>{up.on("keypress","#id_coupon",(A,z)=>{document.querySelectorAll("#id_coupon").forEach(p=>{p.name=""}),z.name="coupon"})});up.compiler("#checkme",()=>{const A=document.querySelector('button[type="submit"]');A.setAttribute("disabled",""),up.on("change","#checkme",(z,p)=>{p.checked?A.removeAttribute("disabled"):A.setAttribute("disabled","")})});up.compiler("#checkme",()=>{const A=document.querySelector('button[type="submit"]');A.setAttribute("disabled",""),up.on("change","#checkme",(z,p)=>{p.checked?A.removeAttribute("disabled"):A.setAttribute("disabled","")})});up.compiler("button.modify",()=>{const A=document.querySelector(".action-buttons");up.on("click","button.modify",(z,p)=>{document.querySelector("fieldset").removeAttribute("disabled"),p.classList.add("hidden"),Te(A,"hidden","flex")})});function et(){for(var A=[],z=document.getElementsByName("_selected_action"),p=0;p<z.length;p++)z[p].checked&&A.push(z[p].value);console.log(A),document.querySelectorAll(".selected_requests").forEach(n=>{A.length>0?n.setAttribute("value",A):n.removeAttribute("value")})}up.compiler("#select_request_action",()=>{up.on("change",'[name="_selected_action_all"]',(A,z)=>{document.querySelectorAll('[name="_selected_action"]').forEach(p=>{p.checked=z.checked}),et()}),up.on("change",'[name="_selected_action"]',(A,z)=>{et()}),up.on("change","#select_request_action",(A,z)=>{var p=z.value,n=document.querySelector(".section-send-money"),o=document.querySelector(".section-refused-money");p==="request_done"?(n.classList.remove("hidden"),n.classList.add("flex")):p==="request_refused"&&(o.classList.remove("hidden"),o.classList.add("flex"))})});localStorage.theme==="dark"||!("theme"in localStorage)&&window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark");up.on("click",".toggle-theme",()=>{localStorage.theme==="dark"?(document.documentElement.classList.remove("dark"),localStorage.theme="light"):(document.documentElement.classList.add("dark"),localStorage.theme="dark")});up.compiler("#drawer",A=>{document.body.classList.remove("overflow-hidden");const z=document.getElementById("overlay");up.on("click",".toggle-drawer",()=>{document.body.classList.toggle("overflow-hidden"),up.element.toggleClass(z,"invisible"),up.element.toggleClass(A,"translate-x-96")})});up.compiler("#dashboard-drawer",A=>{document.body.classList.remove("overflow-hidden");const z=document.querySelectorAll(".brand"),p=document.querySelector(".dashboard-toggle-drawer"),n=document.querySelector(".dashboard-toggle-drawer svg"),o=document.querySelectorAll(".text-clip"),r=document.querySelector(".content"),e=document.getElementById("overlay");up.on("click",".dashboard-toggle-drawer",()=>{up.element.toggleClass(e,"hidden"),up.element.toggleClass(n,"rotate-180"),Te(A,"invisible","lg:hover:w-80","lg:w-[6.1rem]","translate-x-96"),Te(p,"lg:invisible","lg:group-hover:visible"),Te(r,"lg:pr-[6.1rem]","lg:pr-80"),z.forEach(t=>{Te(t,"lg:invisible","lg:group-hover:visible")}),o.forEach(t=>{Te(t,"before:right-0","before:right-[2.35rem]","before:group-hover:right-0")})})});up.compiler("#tabs",()=>{var A=location.hash.substring(1).split("tab")[1];function z(p){const n=p.querySelector(".tabs-header"),o=p.querySelector(".tabs-content"),r=[...n.children],e=[...o.children];e.forEach(a=>a.classList.add("hidden"));let t=-1;function s(a){t>-1&&(r[t].classList.remove("bg-secondary","rounded-lg","shadow-sm","text-primary"),r[t].classList.add("text-slate-100"),e[t].classList.add("hidden")),r[a].classList.add("bg-secondary","rounded-lg","shadow-sm","text-primary"),r[a].classList.remove("text-slate-100"),e[a].classList.remove("hidden"),t=a,location.hash=`#tab${t}`}default_tab_index=r.findIndex(a=>[...a.classList].indexOf("default-tab")>-1),default_tab_index=default_tab_index===-1?0:default_tab_index,s(default_tab_index),r.forEach((a,l)=>a.onclick=w=>s(l)),A&&r[A].click()}[...document.querySelectorAll(".tabs-container")].forEach(p=>z(p))});up.compiler("#sections",()=>{document.querySelectorAll("[data-section]").forEach(z=>{z.addEventListener("click",p=>{p.preventDefault(),document.querySelectorAll("."+z.dataset.section).forEach(o=>{Te(o,"hidden","flex")})})})});up.compiler("#order-options-list",A=>{A.children.length==0&&(A.remove(),document.querySelector("#order-options").remove())});function Dt(){return location.protocol==="https:"?"wss://":"ws://"}const $e=[];function ze(A){for(var z,p=Dt()+window.location.host+A,n=0;n<$e.length;n++){var o=$e[n];if(o.url==p){z=o;break}}return z||(z=new WebSocket(p),$e.push(z)),z}up.compiler("#json-username",()=>{new ze("/ws/connection_status/");const A=JSON.parse(document.getElementById("json-username").textContent),z=new ze("/ws/notifications/"+A+"/");z.onmessage=function(p){JSON.parse(p.data),up.render({target:"#notifications-button",url:window.location.toString(),clearCache:!0}),up.render({target:".section-notification",url:window.location.toString(),clearCache:!0})}});up.on("up:fragment:inserted",()=>{var A=document.querySelectorAll(".alert");A.forEach(z=>{setTimeout(()=>{z.style.opacity="0"},3e3),setTimeout(()=>{z.classList.add("hidden")},5e3)})});up.on("click","#notifications-button",(A,z)=>{z.classList.contains("notification-badge")&&up.request("/api/notifications/read/",{method:"GET"}).then(p=>{up.render({target:"#notifications-button",url:window.location.toString(),clearCache:!0})})});const Nt={labelIdle:'\u0627\u0633\u062D\u0628 \u0648 \u0627\u062F\u0631\u062C \u0645\u0644\u0641\u0627\u062A\u0643 \u0623\u0648 <span class="filepond--label-action"> \u062A\u0635\u0641\u062D </span>',labelInvalidField:"\u0627\u0644\u062D\u0642\u0644 \u064A\u062D\u062A\u0648\u064A \u0639\u0644\u0649 \u0645\u0644\u0641\u0627\u062A \u063A\u064A\u0631 \u0635\u0627\u0644\u062D\u0629",labelFileWaitingForSize:"\u0628\u0627\u0646\u062A\u0638\u0627\u0631 \u0627\u0644\u062D\u062C\u0645",labelFileSizeNotAvailable:"\u0627\u0644\u062D\u062C\u0645 \u063A\u064A\u0631 \u0645\u062A\u0627\u062D",labelFileLoading:"\u0628\u0627\u0644\u0625\u0646\u062A\u0638\u0627\u0631",labelFileLoadError:"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062A\u062D\u0645\u064A\u0644",labelFileProcessing:"\u064A\u062A\u0645 \u0627\u0644\u0631\u0641\u0639",labelFileProcessingComplete:"\u062A\u0645 \u0627\u0644\u0631\u0641\u0639",labelFileProcessingAborted:"\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0627\u0644\u0631\u0641\u0639",labelFileProcessingError:"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u0631\u0641\u0639",labelFileProcessingRevertError:"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062A\u0631\u0627\u062C\u0639",labelFileRemoveError:"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u0627\u0644\u062D\u0630\u0641",labelTapToCancel:"\u0627\u0646\u0642\u0631 \u0644\u0644\u0625\u0644\u063A\u0627\u0621",labelTapToRetry:"\u0627\u0646\u0642\u0631 \u0644\u0625\u0639\u0627\u062F\u0629 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629",labelTapToUndo:"\u0627\u0646\u0642\u0631 \u0644\u0644\u062A\u0631\u0627\u062C\u0639",labelButtonRemoveItem:"\u0645\u0633\u062D",labelButtonAbortItemLoad:"\u0625\u0644\u063A\u0627\u0621",labelButtonRetryItemLoad:"\u0625\u0639\u0627\u062F\u0629",labelButtonAbortItemProcessing:"\u0625\u0644\u063A\u0627\u0621",labelButtonUndoItemProcessing:"\u062A\u0631\u0627\u062C\u0639",labelButtonRetryItemProcessing:"\u0625\u0639\u0627\u062F\u0629",labelButtonProcessItem:"\u0631\u0641\u0639",labelMaxFileSizeExceeded:"\u0627\u0644\u0645\u0644\u0641 \u0643\u0628\u064A\u0631 \u062C\u062F\u0627",labelMaxFileSize:"\u062D\u062C\u0645 \u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0623\u0642\u0635\u0649: {filesize}",labelMaxTotalFileSizeExceeded:"\u062A\u0645 \u062A\u062C\u0627\u0648\u0632 \u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u062D\u062C\u0645 \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A",labelMaxTotalFileSize:"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u062D\u062C\u0645 \u0627\u0644\u0645\u0644\u0641: {filesize}",labelFileTypeNotAllowed:"\u0645\u0644\u0641 \u0645\u0646 \u0646\u0648\u0639 \u063A\u064A\u0631 \u0635\u0627\u0644\u062D",fileValidateTypeLabelExpectedTypes:"\u062A\u062A\u0648\u0642\u0639 {allButLastType} \u0645\u0646 {lastType}",imageValidateSizeLabelFormatError:"\u0646\u0648\u0639 \u0627\u0644\u0635\u0648\u0631\u0629 \u063A\u064A\u0631 \u0645\u062F\u0639\u0648\u0645",imageValidateSizeLabelImageSizeTooSmall:"\u0627\u0644\u0635\u0648\u0631\u0629 \u0635\u063A\u064A\u0631 \u062C\u062F\u0627",imageValidateSizeLabelImageSizeTooBig:"\u0627\u0644\u0635\u0648\u0631\u0629 \u0643\u0628\u064A\u0631\u0629 \u062C\u062F\u0627",imageValidateSizeLabelExpectedMinSize:"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u062F\u0646\u0649 \u0644\u0644\u0623\u0628\u0639\u0627\u062F \u0647\u0648: {minWidth} \xD7 {minHeight}",imageValidateSizeLabelExpectedMaxSize:"\u0627\u0644\u062D\u062F \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0623\u0628\u0639\u0627\u062F \u0647\u0648: {maxWidth} \xD7 {maxHeight}",imageValidateSizeLabelImageResolutionTooLow:"\u0627\u0644\u062F\u0642\u0629 \u0636\u0639\u064A\u0641\u0629 \u062C\u062F\u0627",imageValidateSizeLabelImageResolutionTooHigh:"\u0627\u0644\u062F\u0642\u0629 \u0645\u0631\u062A\u0641\u0639\u0629 \u062C\u062F\u0627",imageValidateSizeLabelExpectedMinResolution:"\u0623\u0642\u0644 \u062F\u0642\u0629: {minResolution}",imageValidateSizeLabelExpectedMaxResolution:"\u0623\u0642\u0635\u0649 \u062F\u0642\u0629: {maxResolution}"};function tt(){var A=document.querySelector("#discuss-section div");A.scrollTop=A.scrollHeight}function qt(){const A=document.querySelector('input[name="csrfmiddlewaretoken"]').value,z=document.querySelector("#file-input");return FilePond.registerPlugin(FilePondPluginFileValidateSize,FilePondPluginFileValidateType),FilePond.setOptions({server:{url:"/chat/save-file/",headers:{"X-CSRFToken":A},process:{ondata:n=>(n.append("csrfmiddlewaretoken",A),n)}}}),FilePond.setOptions(Nt),FilePond.create(z)}function rt(){FilePond.find(document.querySelector("#file-input")).destroy(),document.querySelector("#upload-file").checked=!1,document.querySelector("#upload-message").classList.add("hidden")}up.compiler("#discuss-section",()=>{tt();const A=JSON.parse(document.getElementById("json-roomname").textContent),z=JSON.parse(document.getElementById("json-roompath").textContent),p=JSON.parse(document.getElementById("json-username").textContent),n=document.getElementById("chat-form");if(n){st("https://cdnjs.cloudflare.com/ajax/libs/filepond/4.30.4/filepond.min.css"),Re("https://cdnjs.cloudflare.com/ajax/libs/filepond/4.30.4/filepond.min.js"),Re("https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.js"),Re("https://unpkg.com/filepond-plugin-file-validate-size/dist/filepond-plugin-file-validate-size.js");const r=new ze("/ws/"+z+"/"+A+"/");var o;up.on("change","#upload-file",(e,t)=>{t.checked?o=qt():rt()}),n.addEventListener("submit",e=>{if(e.preventDefault(),o&&o.status==3)document.querySelector("#upload-message").classList.remove("hidden");else{const s=document.getElementById("chat-message-input");var t={message:s.value};if(o&&o.status==4){var t=Object.assign({},t,{files:o.getFiles().map(l=>JSON.parse(l.serverId).id)});rt()}r.send(JSON.stringify(t)),s.value=""}}),r.onmessage=function(e){const t=JSON.parse(e.data),s=document.querySelector("#discuss-section div");var a="";if(t.message.files.length>0&&t.message.files.forEach(N=>{a+=`
                    <a href="${N.file}" class="block bg-primary px-3 py-1.5 rounded-full space-x-2 space-x-reverse text-slate-300 text-[13px]" target="_blank" title="${N.name}">
                        <span>${N.name.slice(0,20)}</span>
                        <svg class="inline" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" height="16" width="16">
                            <path fill-rule="evenodd" d="M15.621 4.379a3 3 0 00-4.242 0l-7 7a3 3 0 004.241 4.243h.001l.497-.5a.75.75 0 011.064 1.057l-.498.501-.002.002a4.5 4.5 0 01-6.364-6.364l7-7a4.5 4.5 0 016.368 6.36l-3.455 3.553A2.625 2.625 0 119.52 9.52l3.45-3.451a.75.75 0 111.061 1.06l-3.45 3.451a1.125 1.125 0 001.587 1.595l3.454-3.553a3 3 0 000-4.242z" clip-rule="evenodd"></path>
                        </svg>
                    </a>`}),t.user.username==p)var l='dir="rtl"',w="bg-sky-100 rounded-tr-none",L="space-x-reverse";else var l='dir="ltr"',w="bg-white rounded-tl-none",L=" ";if(t.last_message!=null&&t.last_message.user.username==t.user.username)document.getElementById(`message-${t.last_message.id}`).insertAdjacentHTML("afterend",`<div id="message-${t.message.id}" class="space-y-2 w-fit">
                    <p class="${w} leading-relaxed px-4 py-3 rounded-xl shadow-sm space-y-2 text-slate-700 text-[15px] text-right">
                        <span>${t.message.message}</span> ${a}
                    </p>
                </div>`);else{if(t.last_message!=null&&t.last_message.date.date!=t.message.date.date)var C=`<div class="relative">
                                <div class="absolute inset-0 flex items-center" aria-hidden="true">
                                    <div class="w-full border-t"></div>
                                </div>
                                <div class="relative flex justify-center">
                                    <span class="bg-slate-100 px-2 text-slate-500 text-sm">\u0627\u0644\u064A\u0648\u0645</span>
                                </div>
                            </div>`;else var C=" ";s.innerHTML=s.innerHTML+`<div class="space-y-4" ${l}> ${C} <div class="flex items-start space-x-3 ${L}"> <a href="#" class="flex items-center flex-shrink-0" title="${t.user.first_name} ${t.user.last_name}"> <img src="${t.user.image}" class="aspect-square bg-white h-10 rounded-full shadow-sm w-10" alt="\u0635\u0648\u0631\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645" /> </a> <div class="max-w-md space-y-2"> <div id="message-${t.message.id}" class="space-y-2 w-fit"> <p class="${w} leading-relaxed px-4 py-3 rounded-xl shadow-sm space-y-2 text-slate-700 text-[15px] text-right"> <span>${t.message.message}</span> ${a} </p> </div> </div> </div> </div>`}tt()}}});up.compiler("#json-user-role",()=>{const A=JSON.parse(document.getElementById("json-roomname").textContent),z=document.querySelector('input[name="csrfmiddlewaretoken"]').value;function p(){interval=window.setInterval(function(){up.request(`/orders/order/${A}/`,{headers:{"X-CSRFToken":z},params:{join_meeting:!0},method:"POST"}).then(function(n){const o=JSON.parse(n.text);var r=document.querySelector("#join-meeting-anchor"),e=document.querySelector("#sessions-count"),t=document.querySelector("#join-meeting"),s=`<div id="sessions-count" class="mt-2 bg-primary border border-transparent flex p-4 rounded-lg shadow-sm text-slate-100"> <svg xmlns="http://www.w3.org/2000/svg" class="flex-shrink-0" height="22" width="22" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"> <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" /> </svg> <span class="leading-relaxed pr-3 text-[15px] text-right">\u0623\u0645\u0627\u0645\u0643 ${o.sessions_count} \u062C\u0644\u0633\u0627\u062A \u062D\u062A\u064A \u064A\u062D\u064A\u0646 \u062F\u0648\u0631\u0643</span> </div>`;e&&e.remove(),o.join_url!=null&&(t.innerHTML=t.innerHTML+s,r.setAttribute("href",o.join_url),r.classList.remove("hidden"))})},1e4)}p()});up.compiler("#imagePreview",()=>{up.on("change","#id_image",(A,z)=>{var p=new FileReader;p.readAsDataURL(z.files[0]),p.onload=function(){localStorage.setItem("image",p.result),document.getElementById("imagePreview").setAttribute("src",localStorage.getItem("image")),up.submit("form")}})});up.compiler("body",()=>{Re("https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js")});function nt(A){var z=Number(JSON.parse(document.getElementById("json-buyer-tax").textContent)),p=JSON.parse(document.getElementById("json-vat").textContent),n=JSON.parse(document.getElementById(`json-${A}-price`).textContent),o=document.querySelector("#id_type").value,r=document.querySelector(`#id_${A}_amount`).value,e=document.querySelector(`#id_${A}_preview span`);if(o=="percentage")var t=n-n/100*r;else var t=n-r;var t=t+t/100*p+z;e.innerHTML=t.toFixed(2)}up.compiler("#add-offer",()=>{const A=["text","video"];for(var z in A)nt(A[z]);up.on("change","#add-offer",p=>{for(var n in A)nt(A[n])})});up.compiler(".paginator",()=>{const z=[...new URLSearchParams(window.location.search).entries()].filter(([p])=>p!=="page").map(([p,n])=>`${p}=${n}`).join("&");document.querySelectorAll(".paginator a").forEach(p=>{p.href!="#"&&p.setAttribute("href",`${p.href}&${z}`)})});up.link.config.followSelectors.push("a[href]");up.link.config.instantSelectors.push("a[href]");up.form.config.submitSelectors.push(["form"]);up.fragment.config.runScripts=!0;up.log.config.banner=!1;up.log.config.enabled=!1;
